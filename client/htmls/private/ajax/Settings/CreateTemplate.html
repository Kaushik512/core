     <script>
//    $(".tree-view").hide();
   
</script>
<script src="/private/js/settingscommon.js"></script>

 <div class="tab-pane" id="l2">
                        <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-10" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-sortable="false">
               <div>
                             <div class="jarviswidget-editbox">


                                </div>
                                <div class="widget-body no-padding">

                                    <div class="panel-group smart-accordion-default" id="accordion-2">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseOne-2"> <i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>Searched Images</a></h4>
                                             
                            
                                                </div>
                                            <div id="collapseOne-2" class="panel-collapse collapse in">
                                                <div class="row">
    
                                                <div class="btn-group pull-right">
                                           <a class="btn btn-minier btn-primary" id="launchProviderTypeSelection" href="#popupSelectProvider" data-toggle="modal" style="margin-top:5px;margin-right: 30px;margin-bottom: 5px;">Search</a> 
                          </div>
 
                                                <div class="panel-body">
                        <!-- NEW COL START -->
                        <div class="row">
    <div class="col-md-12">
        <div class="col-md-12">

            <div class="widget-box">
                
                    <div class="widget-toolbar no-border">
                    </div>
                <div class="widget-body">
                    <div class="widget-main widgetHeight">
                        <div class="col-md-12" style="padding-left:0px; padding-right:0px;">
                            <table id="templateTable" class="hidden" cellpadding="5px" width="100%">
                                    <thead>
                                        <tr class="rowCustomStyle">
                                            <td>Image Name</td>
                                            <td>Tag</td>
                                            <td>Description</td>
                                            <td>Action</td>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="hidden rowtemplate">
                                        <td datafield="imagename"></td>
                                        <td datafield="tag"></td>
                                        <!--<td datafield="orgname"></td>-->
                                        <td datafield="description">
                                            <input type="text" id="imgDesc"  class="form-control"/>
                                        </td>
                                        <td>
                                            <div class=" hidden-sm hidden-xs btn-group">
                                                <button class="btn btn-xs btn-danger pull-left" value="Remove" title="Remove" onclick="removeRow(this);"><i class="ace-icon fa fa-trash-o bigger-120"></i></button>
                                                <a class="btn btn-xs btn-info pull-left hidden" title="Update">
                                                    <i class="ace-icon fa fa-pencil bigger-120"></i>
                                                </a>
                                            </div>
                                        </td>

                                    </tr>
                                    </tbody>
                                    </table>
                             <table id="temptable" class="table table-striped table-bordered table-hover dataTable no-footer" cellpadding="5px" width="100%">
                                    <thead>
                                        <tr class="rowCustomStyle">
                                        <td>Image Name</td>
                                        <td>Tag</td>
                                        <td>Description</td>
                                        <td class="">Action</td>
                                            </tr>
                                    </thead>
                                    <tbody>
                                        
                                       
                                    </tbody>
                                    
                                </table>
                                    </div>
                                    </div>
                                   
                                        </form>
                                         </div>
                                    </div>
                                    <!-- end widget content -->
                                    
                                </div>
                                <!-- end widget div -->
                                
                           
                            <!-- end widget -->             
                   
                        </article>
                        <!-- END COL -->
                     </div>
                    <!-- END ROW -->
                </section>
                <!-- end widget grid -->

            </div>
                         </div>
                                                    </div>
                                                 </div>
                                    </div>
                                        
                                  
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapse2" class="collapsed"><i class="fa fa-fw fa-plus-circle txt-color-green"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>CookBook</a></h4>
                                            </div>
                                            <div id="collapse2" class="panel-collapse collapse">
                                                <div class="panel-body">

                                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                                        <div id="divtable" style="clear: both; float: left;">
                                                                                <div class="col-lg-5" style="margin-left: 14px">
                                                                                    <div class="input-group">
                                                                                        <div class="btn-group">
                                                                                            <select id="jsonFiles" class="form-control" style="width: 200px" size="10" multiple="multiple">
                                                                                            <option>apache <span></option>
                                                                                            <option>apache2</option>
                                                                                            <option>apt</option>
                                                                                            <option>aptgetupdate</option>
                                                                                            <option>art</option>
                                                                                            <option>art_active_windows</option>
                                                                                            <option>art_add_admin_grp</option>
                                                                                            <option>art_append_hosts</option>
                                                                                            <option>art_application_hosts</option>
                                                                                            <option>art_application_code</option>
                                                                                            <option>art_base</option>
                                                                                            <option>art_check_ms</option>
                                                                                            </select>
                                                                                            <div>
                                                                                            </div>
                                                                                                </div>
                                                                                        <div class="row">
                                                                                <section class="col col-6" style="margin-top: 20px;">
                                                                                    <label for="">Template Name<span class="control-label redSpan">&nbsp;*</span>
                                                                        <label id="msgOrgName" style="display:none;color:red;float:right;">Required</label>
                                                                    </label>
                                                                    <label class="input">
                                                                        <input name="ctl00$MainContent$orgname" value="_default" id="templatename" class="form-control" type="text"><span data-val-controltovalidate="orgname" id="MainContent_Req_orgname" data-val="true" data-val-evaluationfunction="RequiredFieldValidatorEvaluateIsValid" data-val-initialvalue="" style="visibility:hidden;">Required</span>
                                                                    </label>
                                                                </section>
                                                                                        </div>
                                                                                     
                                                                                        <!-- /btn-group -->
                                                                                    </div>
                                                                                    <!-- /input-group -->
                                                                                </div>
                                                            
                                                                                <div class="col-lg-2" style="margin-top: 52px; margin-left: -15px">
                                                                                    <div class="input-group">
                                                                                        <div class="btn-group" style="padding-bottom: 10px;">
                                                                                            <button type="button" style="width:78px;height:27px;" class="btn btn-default btn-primary" id="btnaddToSuite">Add</button>
                                                                                        </div>
                                                                                        <div class="clearfix"></div>
                                                                                        <div class="btn-group">
                                                                                            <button type="button" style="width:78px;height:27px;" class="btn btn-default btn-primary" id="btnremoveFromSuite">Remove</button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-lg-3">
                                                                                    <div class="input-group">
                                                                                        <div class="btn-group">
                                                                                            <table>
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        <select id="suiteFiles" class="form-control" style="width: 200px" size="10" multiple="multiple"></select>
                                                                                                    </td>
                                                                                                    <td style="padding-left:10px;">
                                                                                                        <button type="button"  style="width:78px;height:27px;" class="btn btn-default btn-primary" id="btnSuiteItemUp">Up</button>
                                                                                                        <div class="clearfix"></div>
                                                                                                        <div class="clearfix"></div>
                                                                                                        <div class="btn-group" style="padding-top: 10px">
                                                                                                            <button type="button" style="width:78px;height:27px;" class="btn btn-default btn-primary" id="btnSuiteItemDown">Down</button>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                           
                                                                                            <div class="btn-group" style="padding-bottom: 10px; margin-top: 40px;">
                                                                                            </div>
                                                                                            <!-- /.btn-group -->
                                                                                        </div>
                                                                                        
                                                                                       <!-- /.input-group -->
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>





                                                                </div>




                                                    </div>
                                     
                   </div>

                        <div class="widget-toolbox clearfix">
                       <div class="btn-group pull-right">
                        <button class="btn btn-primary btn-mini " style="margin-right:10px;" id="btnsave">
                            <i class="ace-icon fa fa-check bigger-110"></i>
                             Save
                        </button>
                           <button class="btn btn-primary btn-mini" onclick="window.history.back();" id="btncancel">
                               <i class="ace-icon fa fa-undo bigger-110"></i>
                               Cancel
                           </button>
                        </div>
                </div>
            </div>
</div>
        

   </div>     
     </div>           
                    
<div style="display:">
    
 </div>
<div class="modal fade" id="popupSelectProvider" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="margin-left: 310px;margin-top: 131px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    Image Details
                </h4>
            </div>
            <div class="modal-body no-padding" style=float:center;>

                <form action="" id="login-form" class="smart-form">

                    <fieldset style="padding-top:20px;">
                            <div class="row">
                    <section class="col col-6" style="padding-left">
                        <label for="">Image Name
                        </label>
                        <label class="input">
                            <input class="search form-control" type="search" onkeyup="filter(this)" />
                            </label>
                        </section>
                            </div>
                        <section class="col col-6" style="padding-left:0px;">
                            <label for="">
                                Select Image
                            </label>
                                    <label class="select">
                                         
                                <select class="image-name" id="imagename">
                                  <option value="Apache">Apache</option>
                                  <option value="Tomcat">Tomcat</option> 
                                </select>
                                        <span data-val-controltovalidate="domainname" id="MainContent_Req_orgname" data-val="true" data-val-evaluationfunction="RequiredFieldValidatorEvaluateIsValid" data-val-initialvalue="" style="visibility:hidden;">Required</span>
                            </label>
                        </section>
                        <section class="col col-6" style="padding-left:0px;">
                            <label for="">
                                Select Tag 
                            </label>
                                    <label class="select">
                            
                              <select class="tag-name" id="tag">
                                  <option value="Apache">Apache</option>
                                  <option value="Tomcat">Tomcat</option>  
                                </select>
                                        <span data-val-controltovalidate="domainname" id="MainContent_Req_orgname" data-val="true" data-val-evaluationfunction="RequiredFieldValidatorEvaluateIsValid" data-val-initialvalue="" style="visibility:hidden;">Required</span>
                            </label>
                        </section>
                    </fieldset>

                    <footer>
                        <a type="button" class="btn btn-default" onclick="cancelClicked();" data-dismiss="modal" href="#ajax/Settings/CreateTemplate.html?new">
                            Done
                        </a>
                        <button name="button" id="clickadd" onclick="addImageToTable();return(false);" class="btn btn-primary">
                           Add
                        </button>
                       
                        <a href="#ajax/Settings/CreateTemplate.html" id="abacklink" class="btn btn-primary providerchecked hidden">
                            Back
                        </a>
                    </footer>
                </form>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<script>

    //Form Name
    function cancelClicked() {
        $("#popupSelectProvider").modal('hide');
        $(".modal-backdrop.fade.in").detach();
        // $("#popupSelectProvider").modal('hide');
        //   $('#btncancel').click();
    }
    function removeRow(curBtn) {
        $(curBtn).closest('tr').detach();
    }

    function addImageToTable() {
        var rowtemplate = $('.rowtemplate').clone();
        rowtemplate.find('td[datafield]').each(function () {
            //alert($(this));


            if ($(this).attr('datafield') == "imagename") {
                $(this).html($('#imagename').val());
                $('#imagename').val = '';
            }

            if ($(this).attr('datafield') == "tag") {
                $(this).html($('#tag').val());
                $('#tag').val = '';
            }


        });
        $(rowtemplate).removeClass('rowtemplate');
        $(rowtemplate).removeClass('hidden');
        $('#temptable').append(rowtemplate);
        
    }

    function inLineReady() {
        //alert('in');

        $("input[type='text']").on("click", function () {
            $(this).select();
            $("#msgOrgName").hide();
        });
        $("#popupSelectProvider").modal({ keyboard: false, backdrop: "static" });
        $('#createproviderbody').css("display", "none");
        $('#content').css("opacity", "1 !important");
        // if (readform(9) == true) {  //9 is the reference for provider master. Function returns true if in not in edit mode
        //     $("#launchProviderTypeSelection").click();
        //  }
        $("#popupSelectProvider").modal('hide');

       // readform(15); //7 is for users
        //
       // alert('test');
        $('#content').css('opacity','1 !important');
        //Force opening the left navigation menu
        if ($('#navSettings').is(":visible") == false) {
            $('#navSettings').css("display", '');
            $('#navSettings > ul > li').first().addClass('open');
            $('#navSettings > ul > li > ul').css("display", "none");
            $('#navSettings > ul > li > ul').first().css("display", "block");
        }
        //redrawing the breadcrumb and selecting the tree
        $('#ulsettingstree > li').removeClass('active');
        $('#ulsettingstree > li').each(function () {
            if ($(this).text().trim() == "Template")
                $(this).addClass('active');
        });
        drawBreadCrumb1();


    }
    inLineReady();

    $('#btnsave').click(function () {
        //window.tempString = "{\"rows\": { \"row\": [{\"templatename\": \"Test\",\"list\": {\"imagename\": \"CentOS\",\"tag\": \"6.4\",\"description\": \"A bare installation of centos\" \"cookbook\": \"Node\"}}]}}";
        //window.tempString = '{ "rows": { "row": [{ "templatename": "docker", "list": { "imagename": "Apache", "tag": "apache", "description": "an apache", "cookbook": "art"}}]} }';
        // window.history.back(-1);
        //var obj=(JSON.parse("{\"rows\": { \"row\": [{\"templatename\": \"" + templatename + "\,\"list\": {\"imagename\": \"" + imagename + "\",\"tag\": \"" + tag + "\",\"description\": \"" + description + "\",\"cookbook\": \"" + suiteFiles + "\"}}]}}"));
        var table = $("#temptable");
        var data1 = new FormData();//stores the form value to submit
        table.find('tr').each(function (i, el) {
            var $tds = $(this).find('td[datafield]'),
            imagename = $tds.eq(0).text(),
            tag = $tds.eq(1).text(),
            description = $tds.eq(2).find('input').val();
            alert('image name=' + imagename + 'tag=' + tag + 'description=' + description);
        });
        var runlist = $('#suiteFiles').val();
        alert(runlist);
        var tempname = $('#templatename').val();
        alert(tempname);
        var cb = [];
        var list = [];
        var formid = 15;
        //preparing data
        $('#temptable tbody tr').each(function(){

        });

        var list = [];
        $('#temptable tbody tr').each(function(){
          var listrow = "";
          $(this).find('td[datafield]').each(function(){
            if(listrow != '')
              listrow += ",";
            if($(this).find('input').length > 0){ //contains input field
              listrow += '\"' + $(this).attr('datafield') + "\":\"" +  $(this).find('input').val() + '\"';
            }
            else{
              listrow +=  '\"' + $(this).attr('datafield') + "\":\"" +  $(this).text() + '\"';
            }
                });
          if(listrow != "")
            list.push("{" + listrow + "}");
        });
        data1.append("list",JSON.stringify(list));


        var cookbooks = [];

        $('#suiteFiles option').each(function(){
            cookbooks.push($(this).val());
        });

        alert(serviceURL + "savemasterjsonfull/" + formID);
     /*   $.ajax({
                url:serviceURL + "savemasterjsonfull/" + formID,
                data:data1,
                processData: false,
                contentType: false,
                type: 'POST',
                success:function(data,success){
                  alert('Successfully Saved'); 
                    $(".savespinner").hide();
                    if($('#btncancel'))
                            $('#btncancel').click();
                    },
                error:function(jqxhr){
                    alert(jqxhr.status);
               }
        }); */






    });

    $("#btnaddToSuite").on('click', function () {
        var x = document.getElementById("jsonFiles");
        for (var i = 0; i < x.options.length; i++) {
            if (x.options[i].selected == true) {
                var y = document.createElement("option");
                y.value = x.options[i].value;
                y.innerHTML = x.options[i].text;
                $("#suiteFiles").append(y);

            }
        }
    });

    $("#btnremoveFromSuite").on('click', function () {
        $("#suiteFiles option:selected").remove();
    });

    $("#btnSuiteItemUp").on('click', function () {
        $("#suiteFiles option:selected").each(function () {
            var listItem = $(this);
            var listItemPosition = $("#suiteFiles option").index(listItem) + 1;

            if (listItemPosition == 1) return false;

            listItem.insertBefore(listItem.prev());
        });

    });

    $("#btnSuiteItemDown").on('click', function () {
        var itemsCount = $("#suiteFiles option").length;

        $($("#suiteFiles option:selected").get().reverse()).each(function () {
            var listItem = $(this);
            var listItemPosition = $("#suiteFiles option").index(listItem) + 1;

            if (listItemPosition == itemsCount) return false;

            listItem.insertAfter(listItem.next());

        });
    });

</script>

