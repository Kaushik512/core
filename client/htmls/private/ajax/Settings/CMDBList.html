
		<div class="row">
			<div class="col-md-12">
				<div class="col-md-12">
					<div class="widget-box">
						<div class="widget-header">
							<h5 class="widget-title" style="color:#4e5964;">
		                   		 <strong>ServiceNow CMDB Management</strong>
		                    </h5>
		                    <div class="widget-toolbar no-border">
		                    	<div>
                            		<a id="newConfig" class="btn btn-minier btn-primary" href="#ajax/Settings/ConfigCMDB.html">
		                                <i class="ace-icon ace-icon fa fa-plus bigger-110"></i>
		                                New
                            		</a>
		                    	</div>
		                    </div>
						</div>
						<div class="widget-body">
							<div class="widget-main" style="min-height:300px">
								<div class="col-md-12 table-responsive" style="padding-left:0px; padding-right:0px;">
									<table id="cmdbtable" class="table table-striped table-bordered table-hover table-condensed" cellpadding="5px" width="100%" style="text-align:center">
                                		<thead>
                                    		<tr class="rowCustomStyle">
		                                        <td>ServiceNow Server Name</td>
		                                        <td>User Name</td>
		                                        <td>URL</td>
		                                        <td>Organization</td>
		                                        <td>Chef Server</td>
		                                        <td class="">Action</td>
                                    		</tr>
                               			 </thead> 
                               			 <tbody>
			                               	  <tr class="hidden rowtemplate">
			                                        <td datafield="configname"></td>
			                                        <td datafield="loginname"></td>
			                                        <td datafield="url"></td>
			                                        <td datafield="orgname"></td>
			                                        <td>
                                                    <div class="btn-group tableactionWidthCheficon">
			                                                <a class="btn btn-xs btn-danger pull-left" value="Remove" title="Remove"><i class="ace-icon fa fa-trash-o bigger-120"></i></a>

			                                                <a class="btn btn-xs btn-info pull-left" title="Update">
			                                                    <i class="ace-icon fa fa-pencil bigger-120"></i>
			                                                </a>
			                                                
			                                                <a class="btn btn-xs btn-primary tableactionbuttonpadding" title="Import Nodes">
			                                                    <i class="ace-icon fa fa-download bigger-120"></i>
			                                                </a>
			                                                
			                                                <a class="btn btn-xs btn-primary tableactionbuttonpadding" title="DataBag">
			                                                    <i class="ace-icon fa fa-folder bigger-120"></i>
			                                                </a>
			                                            </div>
			                                            
			                                        </td>

			                                    </tr>
                               			 </tbody>        
                            		</table>
                        		</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
          $(document).ready(function () {

          	$.get('/cmdb/list',function(data){

                console.log("In CMDBList::"+ data);

                var $taskbody = $('#cmdbtable').find('tbody');
	            $taskbody.empty();

              for(i=0;i<data.length;i++){
               	
               	if(data[i].servicenowusername){

		            var $tr = $('<tr style="line-height:2.3" id="'+data[i]._id+'"></tr>');
		            $tr.append('<td scope="col" style="font-size:12px;">'+data[i].configname+'</td>');

		            $tr.append('<td scope="col" style="font-size:12px;">'+data[i].servicenowusername+'</td>');

		            $tr.append('<td scope="col" style="font-size:12px;">'+data[i].url+'</td>');

		            $tr.append('<td scope="col" style="font-size:12px;">'+data[i].orgname[0]+'</td>');

		            $tr.append('<td scope="col" style="font-size:12px;">'+data[i].chefserver+'</td>');

		            var $td = $('<td></td>');
                    
                    var $div = $('<div class="btn-group tableactionWidthCheficon"></div');

		            var $removeButton = '<a class="btn btn-danger pull-left btn-sg '
		            	     + 'tableactionbutton removeAction" data="'+data[i]._id+'" value="Remove" title="Remove"'
		            	     + '><i class="ace-icon fa fa-trash-o '
		            	     + 'bigger-120"></ i></a>';

		            var $updateButton = '<a class="btn btn-info pull-left ' 
		               + 'tableactionbutton tableactionbuttonpadding btn-sg updateAction" '
		               + 'title="Update" href="#ajax/Settings/ConfigCMDB.html?'+data[i]._id
		               + '"><i class="ace-icon fa fa-pencil bigger-120"></i></a>'; 	     

		            var $importButton='<a class="btn btn-sg btn-primary tableactionbutton '
		             + 'tableactionbuttonpadding importAction" title="Import Nodes" '
		             + 'href="#ajax/Settings/servicenowSync.html?'+data[i]._id+'"><i class="ace-'
		             + 'icon fa fa-download bigger-120"></i></a>';   

		            $div.append($removeButton);	     
		            $div.append($updateButton);
		            $div.append($importButton);
		            
		            $td.append($div);
                    $tr.append($td);

		            $taskbody.append($tr);
	             }

	           }
	           
	           $(".removeAction").on('click', function(e){
	           		//alert($(this).attr('data'));
	            	console.log('deleting..');
        	        var id = $(this).attr('data');
                    console.log(id);

             	   $.ajax({
                         url: '/servicenow/removeItem/id/'+id,
                         type: 'DELETE',
                         success: function(data) {
                           console.log("after deletion"+data);
                         }
                      }); 
	            });
               });


          });


		</script>