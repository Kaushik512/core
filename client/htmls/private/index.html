<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
		<title>Catalyst</title>
		<meta name="description" content="">
		<meta name="author" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.css">
		<link rel="stylesheet" type="text/css" media="screen" href="css/Catalyst.css">
	</head>
	<body class="custom-theme">
		<script type="text/javascript">
		//Refresh Issue Fix. This function will get executed when there is a refresh and the url is not of the home page.
		function firstLoad(){
		if(window.location.href.indexOf('#') > 0)
				window.location.href = '/private/index.html';
		}
		firstLoad();
		</script>
		<!-- possible classes: minified, fixed-ribbon, fixed-header, fixed-width-->
		<!-- HEADER -->
		<!-- Header starts here -->
		<header>
			<nav class="navbar navbar-default">
	  			<div class="navbar-header">
			      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			        <span class="sr-only">Toggle navigation</span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			      </button>
			      	<a class="navbar-brand" style="width:220px;"><div class="logo"></div></a>
			    </div>

    
			    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			    	<!--left side navbar-->
			      <ul class="nav navbar-nav" style="margin-top:20px;">
			        <li class="left-projects-links hidden" data-target="#Workspace" navigation="Workspace,Workspace1"><a class="active" id="workZoneNew" style="font-size:14px!important" href="javascript:void(0)" onclick="setleftnavigation(this,'org');"><i class="fa fa-credit-card txt-color-blue"></i>&nbsp;WORKZONE</a></li>
			        <li class="left-projects-links hidden" style="margin-left:16px;" data-target="#blueprints"  navigation="blueprints">
							<a href="#ajax/Aws-Production.html" style="font-size:14px!important" id="designNew" onclick="setleftnavigation(this,'Design');"><i class="fa fa-puzzle-piece"></i>&nbsp;DESIGN</a>
						</li>
			        
			      </ul>
			      <!--right side navbar-->
			      <ul class="nav navbar-nav navbar-right" style="font-size:14px!important;margin-top:20px">
			      	<li class="left-projects-links active" id="liuserinfo" style="color:white;margin-right:16px;"></li>
			      	<!-- <li class="left-projects-links"></li> -->
			        <li class="left-projects-links hidden" data-target="#Settings"   navigation="Settings">
								<a class="dropdown-toggle" style="font-size:14px!important" href="#ajax/Settings/Dashboard.html" id="settingsNew"  onclick="setleftnavigation(this,'Settings');"><i class="fa fa-cog"></i>&nbsp;SETTINGS</a>
							</li>

							<li id="logout" class="btn-header transparent pull-right logouttop">
							<span> <a href="../auth/signout" title="Sign Out" style="font-size:16px!important;"><i class="fa fa-sign-out"></i></a> </span></li>
					</ul>
			    </div>
  			</nav>
		</header>
	<!--HEADER ends here -->
	<!-- Left panel : Navigation area -->
	<!-- Note: This width of the aside area can be adjusted through LESS variables -->
	<aside id="left-panel">
		<div id="Workspace1">
			
			<div style="height:40px;background-color:#40baf1;color:white;border-right:1px solid silver;"> 
				
				<div style="margin-top:0px;font-size:11pt;font-weight:bold;padding-left:10px;padding-top:10px">WORKZONE</div>
				
			</div>
			<div id="tree" style="font-size:12px;"></div>
		</div>
		
		<nav style="font-size:12px!important;">
			
			<!--Workspace left panel -->
			<ul class="menu-item-parentdemo hidden" id="Settings">
				<li class="open active">
					<a href="#" style="background-color:#40baf1;margin-right:1px;color: white !important;"><i class="fa fa-lg fa-fw fa-building"></i>
						<span class="menu-item-parent" style="font-weight:bold">Organization Setup</span>
					</a>
					<ul>
						<li class="">
							<a href="ajax/Settings/OrgList.html"><i class="fa fa-lg fa-fw fa-building"></i>
								<span class="menu-item-parent" style="font-weight:bold">Organizations</span>
								
							</a>
						</li>
						
						<li>
							<a href="ajax/Settings/EnvironmentList.html"><i class="fa fa-lg fa-fw fa-tint"></i>
								<span class="menu-item-parent" style="font-weight:bold">Environments</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/ProductGroupList.html"><i class="fa fa-lg fa-fw fa-th"></i>
								<span class="menu-item-parent" style="font-weight:bold">Business Groups</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/ProjectList.html"><i class="fa fa-lg fa-fw fa-tags"></i>
								<span class="menu-item-parent" style="font-weight:bold">Projects</span>
							</a>
						</li>
						
					</ul>
				</li>
				
				<li>
					<a href="#"><i class="fa fa-lg fa-fw fa-qrcode"></i>
						<span class="menu-item-parent" style="font-weight:bold">DevOps Setup</span>
					</a>
					<ul>
						
						<li>
							<a href="ajax/Settings/ConfigManagementList.html"><i class="fa fa-lg fa-fw fa-random"></i>
								<span class="menu-item-parent" style="font-weight:bold">Config Management
								</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/DockerTemplatesList.html"><i class="fa fa-lg fa-fw fa-hdd-o"></i>
								<span class="menu-item-parent" style="font-weight:bold">Docker
								</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/JenkinsConfigList.html"><i class="fa fa-lg fa-fw fa-link"></i>
								<span class="menu-item-parent" style="font-weight:bold">Jenkins
								</span>
							</a>
						</li>
					</ul>
				</li>
				<!--User Setup starts here -->
				<li>
					<a href="#"><i class="fa fa-lg fa-fw  fa-tasks"></i>
						<span class="menu-item-parent" style="font-weight:bold">Users Setup</span>
					</a>
					<ul>
						
						<li>
							<a href="ajax/Settings/RolesList.html"><i class="fa fa-lg fa-fw fa-th-list"></i>
								<span class="menu-item-parent" style="font-weight:bold">User Roles</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/UsersList.html"><i class="fa fa-lg fa-fw fa-user"></i>
								<span class="menu-item-parent" style="font-weight:bold">Users</span>
							</a>
						</li>
					</ul>
				</li>
				<!--Gallery Setup starts-->
				<li>
					<a href="#"><i class="fa fa-lg fa-fw fa-building"></i>
						<span class="menu-item-parent" style="font-weight:bold">Gallery Setup</span>
					</a>
					<ul>
						<li>
							<a href="ajax/Settings/TemplatesList.html"><i class="fa fa-lg fa-fw fa-files-o"></i>
								<span class="menu-item-parent" style="font-weight:bold">Templates</span>
							</a>
						</li>
						<li>
							<a href="ajax/Settings/ServiceCommandList.html"><i class="fa fa-lg fa-fw fa-terminal"></i>
								<span class="menu-item-parent" style="font-weight:bold">Service Command</span>
							</a>
						</li>
						
					</ul>
				</li>
				<li>	
				<a href="ajax/Settings/Catalyst-Guide.html" target="_blank"><i class="fa fa-book"></i>
						<span class="menu-item-parent" style="font-weight:bold;padding-left:5px;">&nbsp;User Guide</span>
					</a>
				</li>
				
				
				
			</ul>
			<ul class="menu-item-parentdemo" id="Workspace">
				
				
			</ul>
			<ul class="menu-item-parentdemo hidden" id="Track">
				
				
			</ul>
			<ul class="menu-item-parentdemo hidden" id="blueprints">
				<li class="active open">
					<a href="#" style="background-color:#40baf1;margin-right:1px;"><i class="fa fa-lg fa-fw fa-sitemap"></i><span class="menu-item-parent" style="font-weight:bold">PROVIDERS</span>
					</a>
					<ul style="display:block">
						<li>
							<a href="ajax/Aws-Production.html" class="devops_providers"><div class="aws"><span class="menu-item-parent provider-images">&nbsp;&nbsp;AWS</span></div></a>
						</li>
						
						<li>
							<a href="ajax/Azure-DevOps.html" class="devops_providers"><div class="azure"><span class="menu-item-parent provider-images">&nbsp;&nbsp;Azure</span></div></a>
						</li>
						<li>
							<a href="ajax/RL-DevOps.html" class="devops_providers"><div class="rl"><span class="menu-item-parent provider-images">&nbsp;Data Centre</span></div></a>
						</li>
						
						<li>
							<a href="ajax/OpenStack.html" class="devops_providers"><div class="openstack"><span class="menu-item-parent provider-images">&nbsp;Open Stack</span></div></a>
						</li>
						<li>
							<a href="ajax/cloudstack.html" class="devops_providers"><div class="cloudstack"><span class="menu-item-parent provider-images">&nbsp;Cloud Stack</span></div></a>
						</li>
						<li>
							<a href="ajax/Docker.html" class="devops_providers"><div class="dock"><span class="menu-item-parent provider-images">&nbsp;Docker</span></div></a>
						</li>
					</ul>
				</li>
			</ul>
			
		</nav>
		<span class="minifyme"> <i class="fa fa-arrow-circle-left hit"></i> </span>
	</aside>
	<!-- END NAVIGATION -->
	<!-- MAIN PANEL -->
	<div id="main" role="main">
		<!-- RIBBON -->
		<div id="ribbon">
			<div class="demo1">
				<div id="hide-menu" style="margin-top:-3px;">
					<span> <a href="javascript:void(0);" title="Collapse Menu">
					<i class="fa fa-sitemap txt-color-lightwhite"></i></a> </span>
				</div>
			</div>
			<!-- breadcrumb -->
			<ol class="breadcrumb">
				<!-- This is auto generated -->
			</ol>
		</div>
		
		<!-- MAIN CONTENT -->
	 	<div id="content">
		</div> 
		<!-- END MAIN CONTENT -->
	</div>
	<!-- END MAIN PANEL -->
	
	<div id="shortcut" style="margin-left: 100px;margin-top: 90px;">
		<ul class="orgsList">
			
			
		</ul>
	</div>
	<!-- END SHORTCUT AREA -->
	<div id="main-collapse" style="margin-top: 50px;">
		<ul class="" style="width:100%">
			
			<li class="collapseActive">
				<a href="#ajax/Dev.html">WORKZONE</a>
			</li>
			
			<li>
				<a href="#ajax/Aws-Production.html">DESIGN</a>
			</li>
			
			<li>
				<a href="#ajax/Dashboard.html"><span>TRACK</span></a>
			</li>
			
			<li>
				<a href="#ajax/Settings/OrgList.html"><span>SETTINGS</span></a>
			</li>
		</ul>
	</div>
	
	<script src="js/libs/jquery-2.0.2.min.js"></script>
	<script src="js/libs/jquery-ui-1.10.3.min.js"></script>
	<script type="text/javascript" src="js/select2.min.js"></script>
	<script src="js/bootstrap-treeview.js"></script>
	<script src="js/libs/modernizr-2.5.3.min.js"></script>
	<script src="js/bootstrap/bootstrap.min.js"></script>
	<!-- CUSTOM NOTIFICATION -->
	<script src="js/notification/SmartNotification.min.js"></script>
	<!-- JARVIS WIDGETS -->
	
	<script type="text/javascript" src="js/plugin/bootstrap-wizard/jquery.bootstrap.wizard.js"></script>
	<script type="text/javascript" src="js/plugin/bootbox/bootbox.min.js"></script>
	
	<script src="/private/js/jquery.dataTables.min.js"></script>
	<script src="js/jquery.tablesorter.min.js"></script>
	<script src="js/jquery.validate.min.js"></script>
	<script src="js/additional-methods.min.js"></script>
	
	
	

	<!-- MAIN APP JS FILE -->
	<script type="text/javascript">


	function setleftnavigation(toplink,breadcrumbHeader){
	
		$('a[onclick*="setleftnavigation"]').removeClass('active');
		$('a[onclick*="setleftnavigation"]').find("i").removeClass('txt-color-blue');
		$(toplink).addClass('active');
		$(toplink).find('i').addClass('txt-color-blue');
		$('nav > ul').addClass('hidden'); //hiding all navigation elements
		var navbar = $(toplink).closest("li").attr('navigation');
		$('#Workspace1').addClass('hidden');
		if(navbar.length){
			var navs = navbar.split(',');
			for(var i = 0; i< navs.length;i++){
				$('#' + navs[i]).removeClass('hidden');
				$('#' + navs[i]).css('display','');
			}
			
		}
		if(breadcrumbHeader == 'org') {
	var orgName = $('.orgSelected span').text();
	window.selectedOrgName = orgName;
	selectFirstEnv(); //selecting the first item in the org tree.
		} else {
		window.selectedOrgName = breadcrumbHeader;
		}
	}
			
			//Expanding the providers tree
	
	$('#blueprints').find('li a').first().trigger('click');
	$('#blueprints').find('ul li a').first().trigger('click');
	var serviceURL = "../d4dMasters/";
	window.selectedOrgName = $('.orgSelected').text().trim();
	//alert('in');
	var loadTreeFuncNew = function(){
		console.log('Loaded a tree');
		$.ajax({
				type: "get",
				dataType: "json",
				async: false,
				url: "../organizations/getTreeForbtv",
				success: function (data1) {
					console.log('ajax success');
					//alert('New Json' + JSON.stringify(data1));

					$('#tree').html('').treeview({
						data:data1,enableLinks:true,
						collapseIcon:'fa fa-angle-down',
						expandIcon:'fa fa-angle-right',
						levels: 1,
						onNodeSelected: function(event, node) {
							
							window.selectedOrgName = $('li[data-nodeid="' + node.nodeId + '"]').first().find('a').first().attr('orgname');
							console.log("Org Selected:" + window.selectedOrgName );
							localStorage.setItem('selectedOrgName',$('li[data-nodeid="' + node.nodeId + '"]').first().find('a').first().attr('orgname'));
						}
					});
				}
			});
	}
	var selectFirstEnv = function(){
		//alert('hit');
		if($('a[itemtype="org"]').first().parent().find('.expand-collapse').first().attr('class').indexOf('fa-angle-right') > 0)
			$('a[itemtype="org"]').first().trigger('click');
		if($('a[itemtype="bg"]').first().parent().find('.expand-collapse').first().attr('class').indexOf('fa-angle-right') > 0)
			$('a[itemtype="bg"]').first().trigger('click');
		if($('a[itemtype="proj"]').first().parent().find('.expand-collapse').first().attr('class').indexOf('fa-angle-right') > 0)
			$('a[itemtype="proj"]').first().trigger('click');
		$('a[itemtype="env"]').first().trigger('click');
	}
	loadTreeFuncNew();
	selectFirstEnv();
	var loadTreeFunc = function(){
	$.ajax({
				type: "get",
				dataType: "json",
				async: false,
				url: "../organizations/getTreeNew",
				success: function (data) {
					console.log('ajax success');
				//alert(JSON.stringify(data));
				
				var $ulOrgList = $('.orgsList').empty();
				var $workspace = $('#Workspace').empty();
				// track tree view
				var $track = $('#Track').empty();
				for(var i=0;i<data.length;i++) {
					var classOrgSelected = '';
				//	if(i==0) 
					{
				classOrgSelected = 'orgSelected';
					}
					var $li = $('<li data-id="org'+i+'" class="'+classOrgSelected+' open"></li>').append('<a class="orgsOption" href="javascript:void(0)">  <span style="color:white" orname ><i class="fa fa-building "></i>&nbsp;'+data[i].name+'</span></a>').attr('data-org',data[i].name);
					//Adding to Track tree Nav
					var $params = [];
					$params.push(data[i].name);
					//alert(JSON.stringify($params));
					var $TrackerOrgnameli =
					 $('<li class="tcorg"></li>').append('<a href="#" onclick="loadTrackContent(' + JSON.stringify($params).replace(/\"/g,'\'') + ');" ><i class="fa fa-fw fa-1x fa-tasks"></i><span class="menu-item-parent orgtextoverflow" title="'+data[i].name+'" style="font-weight:bold">'+data[i].name+'</span></a>');
					//End Track Adding
					
					$li.click(function(e){
				var $parents = $(this).parents('ul');
				$parents.children('li').removeClass('orgSelected');
				$(this).addClass('orgSelected');
				var id = $(this).attr('data-id');
				$('.org').hide();
				$('.'+id).show();
				});
				$ulOrgList.append($li);

				//Adding to Track Tree
				$track.append($TrackerOrgnameli); //orgname added to root
				//End Track Setting
				for(var j=0;j<data[i].businessGroups.length;j++) {
					//alert(data[i].businessGroups[j].name);
					var $liSideBar = $('<li></li>').data('orgName',data[i].name).hide().data('addToTree',true);
					console.log('here');
								$workspace.append($liSideBar);
							var $projectUl = $('<ul></ul>');
							//Adding to Track Tree
							var $TrackerBGUL = $('<ul></ul>');
							$TrackerOrgnameli.append($TrackerBGUL); //UL added to the org li.
							var $TrackerBGLI = $('<li class="tcbg"></li>');
							$TrackerBGUL.append($TrackerBGLI);
							var $paramsbg = [];
							$paramsbg.push(data[i].name);
							$paramsbg.push(data[i].businessGroups[j].name);
							
					//alert(JSON.stringify($params));
							$TrackerBGLI.append($('<a onclick="loadTrackContent(' + JSON.stringify($paramsbg).replace(/\"/g,'\'') + ');" href="#"><i class="fa fa-fw fa-1x fa-group"></i><span class="menu-item-parent orgtextoverflow" title="'+data[i].businessGroups[j].name+'">'+data[i].businessGroups[j].name+'</span></a>'));
							$TrackerProjUL = $('<ul></ul>');
							$TrackerBGLI.append($TrackerProjUL);
							//End Track Setting
				$liSideBar.append($projectUl);
				
				// <img src="img/demo/Project.png" alt="Project" style="padding-right:5px;">
				for(var k=0;k<data[i].businessGroups[j].projects.length;k++) {
					var $paramsprj = [];
					$paramsprj.push(data[i].name);
					$paramsprj.push(data[i].businessGroups[j].name);
					$paramsprj.push(data[i].businessGroups[j].projects[k].name);
							//alert(data[i].businessGroups[j].projects[k]);
					var liProject = $('<li class="referenceliClass"></li>').append('<a href="#"><i class="fa fa-fw fa-1x fa-tasks"></i><span class="menu-item-parent Projtextoverflow" title="'+data[i].businessGroups[j].projects[k].name+'" style="font-weight:bold">'+data[i].businessGroups[j].projects[k].name+'</span></a>');
					//Adding to Track Tree
					var liTrackerProject = $('<li class="tcproj"></li>').append('<a onclick="loadTrackContent(' + JSON.stringify($paramsprj).replace(/\"/g,'\'') + ');" bgname="' + data[i].businessGroups[j].projects[k].name + '" href="#" orgname="' + data[i].name + '"><i class="fa fa-fw fa-1x fa-tasks"></i><span class="menu-item-parent orgtextoverflow" title="'+data[i].businessGroups[j].projects[k].name+'"  style="font-weight:bold">'+data[i].businessGroups[j].projects[k].name.substring(0,15) +'</span></a>');
					//alert(liTrackerProject);
					$TrackerProjUL.append(liTrackerProject);
					$TrackerEnvUL = $('<ul></ul>');
					$(liTrackerProject).append($TrackerEnvUL);
									//End Track Setting
					$projectUl.append(liProject);
					var $envUl = $('<ul class="referenceulClass"></ul>');
				liProject.append($envUl);
					for(var l=0;l<data[i].businessGroups[j].projects[k].environments.length;l++) {
						var $liEnv = $('<li></li>').append('<a href="ajax/Dev.html?org='+data[i].name+'&projid='+data[i].businessGroups[j].projects[k].name+'&envid='+data[i].businessGroups[j].projects[k].environments[l]+'" data-link="true" class="Envtextoverflow" title="'+data[i].businessGroups[j].projects[k].environments[l]+'"><i class="fa fa-fw fa-1x fa-desktop paddingEnvTree"></i>'+data[i].businessGroups[j].projects[k].environments[l]+'</a>').attr('data-OrgName',data[i].name).attr('data-envName',data[i].businessGroups[j].projects[k].environments[l]);
						$envUl.append($liEnv);
						//Adding to Track Tree
						var $paramsenv = [];
						$paramsenv.push(data[i].name);
						$paramsenv.push(data[i].businessGroups[j].name);
						$paramsenv.push(data[i].businessGroups[j].projects[k].name);
						$paramsenv.push(data[i].businessGroups[j].projects[k].environments[l]);

						
						var $liTrackerEnv = $('<li  class="tcenv"></li>').append('<a onclick="loadTrackContent(' + JSON.stringify($paramsenv).replace(/\"/g,'\'') + ');"  href="#" data-link="true" class="Envtextoverflow" title="'+data[i].businessGroups[j].projects[k].environments[l]+'"><i class="fa fa-fw fa-1x fa-desktop paddingEnvTree"></i>'+data[i].businessGroups[j].projects[k].environments[l]+'</a>').attr('data-OrgName',data[i].name);
						$TrackerEnvUL.append($liTrackerEnv);
						//End Track Setting
					$liEnv.click(function(e){
						window.selectedOrgName = $(this).attr('data-OrgName');
					});
					console.log('data==>',$liSideBar.data('addToTree'));
					if($liSideBar.data('addToTree')) {

						$liSideBar.prepend($('<a><i class="fa fa-fw fa-1x fa-group"></i><span class="menu-item-parent BGtextoverflow" title="'+data[i].businessGroups[j].name+'">'+data[i].businessGroups[j].name+'</span></a>').click(function(e){
						e.preventDefault();
						e.stopPropagation();
						return false;
					}).attr('href','#ajax/Dev.html?org='+data[i].name+'&projid='+data[i].businessGroups[j].projects[k].name+'&envid='+data[i].businessGroups[j].projects[k].environments[l]+'')).addClass('org').addClass('org'+i);
						$liSideBar.data('addToTree',false);
}
					
					}
					}
				}
				}
			// $(function(){
			var href = window.location.href;
			var indexOfhash = href.lastIndexOf("#");
			$('.org').hide();
			console.log('indexOfhash =>',indexOfhash);
			var $a;
			if(indexOfhash!=-1) {
				var sub =  href.substring(indexOfhash+1);
				console.log('here',sub);
				$a = $('a[href="'+sub+'"]');
				var orgName = $a.parents('.org').data('orgName');
				window.selectedOrgName = orgName;

				$ulOrgList.find('[data-org="'+orgName+'"]').trigger('click');
			} else {
				$a = $workspace.find('li').find('a[data-link=true]');
				var orgName = $($a.get(0)).parents('.org').data('orgName');
				window.selectedOrgName = orgName;

				$ulOrgList.find('[data-org="'+orgName+'"]').trigger('click');
			}

			},
			failure: function (data) {
			alert(data.toString());
			}
		});
	} //function ends
</script>
<script src="js/app.js"></script>
<script src="js/chefmodalcommon.js"></script>
<script src="/private/js/settingscommon.js"></script> 

<script>
 $(window).on('hashchange', function() {

     var hash = location.hash;
     console.log("hashChange", hash);
     console.log("pos ==>", location.hash.indexOf("#ajax/Dev.html?"));


     if (location.hash.indexOf("#ajax/Dev.html?") === 0) {
         $(".left-projects-links a").removeClass('active');
         console.log("pos if ==>", location.hash.indexOf("#ajax/Dev.html?"));
         $("#workZoneNew").addClass('active');
     } else if (location.hash == "#ajax/Aws-Production.html") {
         $(".left-projects-links a").removeClass('active');
         $("#designNew").addClass('active');
     } else if (location.hash == "#ajax/Settings/TrackerDashboard.html") {
         $(".left-projects-links a").removeClass('active');
         $("#trackNew").addClass('active');
     } else if (location.hash.indexOf("#ajax/Settings/") === 0) {
         $(".left-projects-links a").removeClass('active');
         $("#settingsNew").addClass('active');
     }
drawBreadCrumb();
 });

    

</script>
</body>
</html>