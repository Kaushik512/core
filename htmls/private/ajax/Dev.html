<style type="text/css">
    .visibleClass{
        display: block;
    }
</style>
<div class="row">

    <article class="col-sm-12 col-md-12 col-lg-12">

            <div class="widget-body" style="font-size:12px;">


                <ul id="myTab3" class="nav nav-tabs tabs-pull-left">
                    <li class="active">
                        <a href="#l1" data-toggle="tab"><i class="fa fa-reorder"></i>&nbsp;Instances</a>
                    </li>
                    <!--<li class="pull-left">
                        <a href="#l2" data-toggle="tab">DevOps Roles</a>
                    </li>-->
                    
                    <li class="pull-left">
                        <a href="#l2" data-toggle="tab"><i class="fa fa-crosshairs"></i>&nbsp;Blueprints</a>
                    </li>

                    <li class="pull-left">
                        <a href="#l3" data-toggle="tab"><i class="fa fa-indent"></i>&nbsp;Orchestration</a>
                    </li>

                    <!-- <li class="pull-left">
                        <a href="#l3" data-toggle="tab"><i class="fa fa-upload"></i>&nbsp;Deployments</a>
                    </li> -->
                    <!--<li class="pull-left">
                        <a href="#l4" data-toggle="tab">Enviornments</a>
                    </li>
                    <li class="pull-left">
                        <a href="#l5" data-toggle="tab">Usage</a>
                    </li>-->
                </ul>

                <div id="myTabContent3" class="nav tab-content">

    <div class="tab-pane fade in active" id="l1">
        <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-10" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-sortable="false">

            <div>
                <div class="jarviswidget-editbox">

                </div>
                <div class="widget-body no-padding">

                    <div class="panel-group smart-accordion-default" id="accordion-1" style="height:444px;overflow-y: auto;">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title"><a data-toggle="collapse">Instance</a></h4>
                                <span class="pull-right swap-view"><a class="btn1" id="defaultViewButton" style="" onclick="showHideControl(this.id)"> <i class="fa fa-th fa-2x txt-color-blue" title="Card View"/></a>&nbsp;<a id="instanceview" class="btn1" onclick="showHideControl(this.id)"> <i class="fa fa-align-justify fa-2x txt-color-blue" title="Table View"/></a></span>
                                <!-- <h4 class="panel-title"><a data-toggle="collapse">Instance</a></h4>
                                <span class="pull-right swap-view"><a class="btn1" id="defaultViewButton" style="" onclick="$('#divinstancestableview').hide();$('#divinstancescardview').show();return(false);"><i class="fa fa-th fa-2x txt-color-blue" title="Card View"/></a>&nbsp;<a class="btn1" onclick="$('#divinstancestableview').show();$('#divinstancescardview').hide();return(false);"> <i class="fa fa-align-justify fa-2x txt-color-blue" title="Table View"/></a></span> -->
                            </div>
                            <div id="collapseOne-1" class="panel-collapse collapse in">
                                <div class="panel-body" style="padding:0px !important;">
                                    <div class="widget-box" id="divinstancestableview">
                                        <div class="widget-body">
                                            <div class="widget-main" style="min-height:300px"> 
                                                <div class="col-md-12" style="padding-left:0px; padding-right:0px;padding-top:50px">
                                                    <div class="table-responsive table-div" >

                                                            <table id="tableinstanceview" class="table table-striped table-bordered table-hover dataTable" cellpadding="5px" width="100%" style="border:1px solid #eeeeee !important">
                                                                <thead>
                                                                    <tr class="rowCustomStyle" style="font-weight:bold;">
                                                                        <td>S.No.</td>
                                                                        <td>Logo</td>
                                                                        <td>Name</td>
                                                                        <td>IPAddress</td>
                                                                        <td>Recipes</td>
                                                                        <td>Status</td>
                                                                        <td>Log Info</td>
                                                                        <td>Chef Run</td>
                                                                        <td class="widthAdjustment">Action</td>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    
                                                                   
                                                                </tbody>
                                                                
                                                               
                                                            </tbody>
                                                            
                                                        </table>
                                                    </div>
                                               </div>
                                            </div> 
                                            
                                        </div>
                                        <div class="widget-toolbox padding-8 clearfix">
                                               <div id="tableFooterLeft" class="pull-left"></div>
                                               <div id="tableFooterRight" class="pull-right"></div>
                                            </div>
                                    </div>
                                    
                                <div id="divinstancescardview" class="carousel slide">
                                  <div class="carousel-inner">
                                    <!-- Slide 1 -->
                                  
                                  </div>
                                  <a class="left carousel-control" href="#divinstancescardview" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left txt-color-blue"></span> </a>
                                  <a class="right carousel-control" href="#divinstancescardview" data-slide="next"> <span class="glyphicon glyphicon-chevron-right txt-color-blue"></span> </a>
                                </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10 col-sm-12 col-xs-12" style="bottom:0px;position:fixed">
                <div class="clearfix form-actions" style="text-align:center;">
                    <div class="btn-group">
                        
                        <button class="btn btn-primary actionControlPanel">
                            <i class="fa fa-gears"></i>
                            Control Panel
                        </button>
                        
                         <!--<button class="btn pull-left btn-primary ChefconfigPanel" style="margin-left:5px">
                            <i class="fa fa-home"></i>
                            Chef config Panel
                        </button>-->
                    </div>
                </div>
            </div>
        </div><!--Launch div ends here-->

    </div>

                    <div class="tab-pane" id="l2">
                        <div class="jarviswidget jarviswidget-color-blueLight" id="wid-id-10" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-sortable="false">

                            <div>


                                <div class="jarviswidget-editbox">


                                </div>
                                <div class="widget-body no-padding">

                                    <div class="panel-group smart-accordion-default" id="accordion-2" style="height:444px;overflow-y: auto;">
                                        <div class="devopsRolePanel panel panel-default blueprintContainer">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapseOne-2"> <i class="fa fa-fw fa-plus-circle txt-color-blue"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>Devop Roles</a></h4>
                                            </div>
                                            <div id="collapseOne-2" class="panel-collapse collapse">
                                                <div class="panel-body"> Testing


                                                </div>
                                            </div>
                                        </div>


                                        <!--App Factory Starts here-->
                                        <div class="appFactoryPanel panel panel-default blueprintContainer">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapse2"><i class="fa fa-fw fa-plus-circle txt-color-blue"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>App Factory</a></h4>
                                            </div>
                                            <div id="collapse2" class="panel-collapse collapse">
                                                <div class="panel-body">

                                                </div>
                                            </div>
                                        </div>
                                        <!--App Factory ends here-->

                                        <div class="panel panel-default blueprintContainer">
                                            <div class="panel-heading ">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapse3" class="collapsed"> <i class="fa fa-fw fa-plus-circle txt-color-blue"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>Cloud Formation</a></h4>
                                            </div>
                                            <div id="collapse3" class="panel-collapse collapse in">
                                                <div class="panel-body">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="desktopProvisioningPanel panel panel-default blueprintContainer">
                                            <div class="panel-heading">
                                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion-2" href="#collapse4"><i class="fa fa-fw fa-plus-circle txt-color-blue"></i> <i class="fa fa-fw fa-minus-circle txt-color-red"></i>Desktop Provisioning</a></h4>
                                            </div>
                                            <div id="collapse4" class="panel-collapse collapse">
                                                <div class="panel-body">

                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>


                            </div>


                        </div>
                        <div class="row">
                            <div class="col-md-10 col-sm-12 col-xs-12" style="bottom:0px;position:fixed">
                                <div class="clearfix form-actions" style="text-align:center">
                                    <div class="btn-group">
                                        <!--<button class="btn pull-left btn-primary editBtn" style="margin-left:5px">
                                            <i class="ace-icon fa fa-pencil  bigger-110"></i>
                                            Edit
                                        </button>-->                                       
                                         <button class="btn pull-left btn-primary launchBtn" style="margin-left:5px">
                                            <i class="ace-icon fa  fa-location-arrow bigger-110"></i>
                                            Launch
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div><!--Launch div ends here-->
                    </div>

                    <!-- <div class="tab-pane" id="l3">
                        

                        <form class="smart-form" action="">
 

                            <fieldset>
                               
                                <section class="col col-4">
                                    <label class="label">
                                        <img src="img/templateicons/Select-nodes---deployment.png">
                                        <strong>Select Nodes</strong>
                                    </label>
                                    <div class="row">
                                        <div class="col col-10">
                                            <ul style="border:1px solid #dddddd;list-style:none outside none;height:300px;overflow-y:auto;" class="deploymentNodeList">
                                               
                                            </ul>
                                        </div>
                                        
                                        
                                    </div>
                                </section>
                                <section class="col col-4">
                                    <label class="label">
                                        <img src="img/templateicons/Create-run-list---deployment.png">
                                        <strong>Create Runlist</strong>
                                    </label>
                                    <div class="row">
                                        <div class="col col-10">
                                            <ul style="border:1px solid #dddddd;list-style:none outside none;height:150px;overflow-y:auto;" class="deploymentCookbookList">
                                                <label class="label" style="text-align:center;">Select Cookbooks</label>
                                                <hr>
                                                
                                            </ul>
                                            <ul style="border:1px solid #dddddd;list-style:none outside none;height:150px;overflow-y:auto;"  class="deploymentRolesList">
                                                
                                                <label class="label" style="text-align:center;">Select Roles</label>
                                                <hr>
                                                
                                            </ul>
                                        </div>
                                        <div style="margin-top: 122px;" class="col col-2">
                                            <div class="input-group">
                                                <div style="padding-bottom: 10px;" class="btn-group">
                                                    <button id="btnDeploymentAddSelectedCookbook" data-original-title="Add" data-placement="top" rel="tooltip" data-html="true" class="btn btn-default btn-primary" style="width:30px;height:27px;" type="button"><i style="font-size:20px;" class="fa fa-angle-double-right"></i></button>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="btn-group">
                                                    <button id="btnDeploymentRemoveSelectedCookbook" class="btn btn-default btn-primary" style="width:30px;height:27px;" type="button"><i style="font-size:20px;" class="fa fa-angle-double-left"></i></button>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </section>
                                <section class="col col-4">
                                    <label class="label">
                                        <img src="img/templateicons/Order-run-list---deployment.png">
                                        <strong>Order RunList</strong>
                                    </label>
                                    <div class="row">
                                        <div class="col col-10">
                                            <ul style="border:1px solid #dddddd;list-style:none outside none;height:300px;overflow-y:auto;" class="deploymentSelectedRunList">
                                                
                                            </ul>
                                        </div>
                                       
                                    </div>
                                </section>

                            
                            </fieldset>

                        </form>
                        <div class="row">
                            <div class="col-md-10 col-sm-12 col-xs-12" style="bottom:0px;position:fixed">
                                <div class="clearfix form-actions" style="text-align:center">
                                    <div class="btn-group">
                                        <button class="btn pull-left btn-primary editBtn deploymentChefRunBtn" style="margin-left:5px">
                                            <i class="ace-icon fa fa-pencil  bigger-110"></i>
                                            Execute Chef Run
                                        </button>                                       
                                         
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                    </div> -->
                                        <div class="tab-pane" id="l3">
                        <div class="row">
                          <div class="col-md-12">
                              <div class="col-md-12">

                                  <div class="widget-box">
                                      <div class="widget-header">
                                          <h5 class="widget-title" style="color:#4e5964;">
                                          <strong>List of Tasks</strong>
                                          </h5>
                                          <div class="widget-toolbar no-border">
                                              <div>     
                                                  <a class="btn btn-minier btn-primary createTaskLink" href="javascript:void(0)">
                                                      <i class="ace-icon ace-icon fa fa-plus bigger-110"></i>
                                                      Create Task
                                                  </a>                                                
                                              </div>
                                          </div>
                                                                  
                                      </div>
                                      <div class="widget-body">
                                          <div class="widget-main" style="min-height:300px">
                                              <div class="col-md-12 table-responsive">
                                                  <table class="table table-striped table-bordered table-hover dataTable no-footer text-align-center table-condensed" cellpadding="5px" width="100%">
                                                      <thead>
                                                          <tr class="rowCustomStyle">    
                                                              <td>Name</td>
                                                              <td>Assigned Node</td>
                                                              <td>Assigned Runlists</td>
                                                              <td>Execute</td>
                                                              <td>Last Run</td>
                                                              <td>Action</td>
                                                          </tr>
                                                      </thead>
                                                      <tbody class="taskListArea">
                                                          <tr>
                                                              <td>Restart_Apache_servers</td>
                                                              <td>
                                                                  <a class="btn btn-primary btn-sg tableactionbutton" href="#assignedNode" data-toggle="modal">
                                                                      <i class="ace-icon fa fa-sitemap fa-14x"></i>
                                                                  </a>
                                                                  <!-- <select id="multiassign1" title="Node" multiple="multiple" name="Node" size="5">
                                                                  </select> -->
                                                              </td>
                                                              <td>
                                                                  <a class="btn btn-primary btn-sg tableactionbutton" href="#assignedRunlist" data-toggle="modal">
                                                                      <i class="ace-icon fa fa-list-ul bigger-120"></i>
                                                                  </a>
                                                              </td>
                                                              <td>
                                                                  <a class="btn btn-primary btn-sg tableactionbutton" href="#assignedExecute" data-toggle="modal">
                                                                      <i class="ace-icon fa fa-play bigger-120"></i>
                                                                  </a>
                                                              </td>
                                                              <td>
                                                                  2014-09-25&nbsp;&nbsp;19:52:31
                                                              </td>
                                                              <td>
                                                                  <div class="btn-group tableactionWidth">
                                                                      <a class="btn btn-danger pull-left btn-sg tableactionbutton" data-original-title="Delete" data-placement="top" rel="tooltip">
                                                                          <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                                      </a>
                                                                      <a class="btn btn-info pull-left tableactionbutton tableactionbuttonpadding btn-sg" data-original-title="Edit" data-placement="top" rel="tooltip">
                                                                          <i class="ace-icon fa fa-pencil bigger-120"></i>
                                                                      </a>
                                                                  </div>
                                                              </td>
                                                          </tr>
                                                      </tbody>
                                                  </table>
                                              </div>
                                          </div>
                                          <div class="widget-toolbox padding-8 clearfix">
                                             <div id="tableFooterLeft" class="pull-left">Showing 1 to 4 of 4 entries</div>
                                             <div id="tableFooterRight" class="pull-right">1</div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                    
                    </div>

                </div>

            </div>

    </article>
</div>

<!-- Modal -->
<div class="modal fade" id="launchDockerInstanceSelector" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width:750px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="dockerInstanceSelectionTitle">Select Instances for </h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-primary dockerinstancestart" style="margin-right:5px;">Start</button>
        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="launchResultContainer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Launching Blueprint</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="blueprintEditResultContainer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Blueprint Edit</h4>
      </div>
      <div class="modal-body">
        
      </div>
      <div class="modal-footer">

        <button type="button" class="btn btn-default btn-primary blueprintUpdateBtn" data-dismiss="modal">Save Version</button>
        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="chefRunModalContainer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-pencil-square-o txt-color-blue"></i>Update Runlist</h4>
      </div>
      <div class="modal-body">
        <div class="loadingContainer">
            <img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/loading.gif"/>
        </div>   
        
        <div class="smart-form" style="display:none;">
            <div class="row">
                <section style="padding-top:18px;">
                    <div style="clear: both;" id="divCookbooks">
                        
                        <div class="col-lg-5">
                            <select multiple="multiple" style="width: 200px;height:150px;margin-left:20px;" class="form-control" id="instanceCookbookList">
                            </select>
                        </div>
                        <div style="margin-top: 50px;" class="col-lg-1">
                            <div class="input-group">
                        <div style="padding-bottom: 10px;" class="btn-group">
                            <button id="btnaddInstanceCookbooks" class="btn btn-default btn-primary"style="width:30px;height:27px;" type="button">
                                <i style="font-size:20px;" class="fa fa-angle-double-right">
                                </i>
                            </button>
                        </div>
                        <div class="clearfix">
                        </div>
                        <div class="btn-group">
                            <button id="btnremoveinstanceCoookbooks" class="btn btn-default btn-primary" style="width:30px;height:27px;" type="button">
                                <i style="font-size:20px;" class="fa fa-angle-double-left">
                                </i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="input-group">
                        <div class="btn-group">
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <select multiple="multiple" style="width: 200px;height:150px;" class="form-control" id="instanceCookbookSelectedList">
                                            </select>
                                        </td>
                                        <td style="padding-left:10px;">
                                            <button id="btninstanceCookbookUp" class="btn btn-default btn-primary" style="width:30px;height:27px;" type="button">
                                                <i style="font-size:20px;" class="fa fa-angle-double-up">
                                                </i>
                                            </button>
                                            <div class="clearfix"></div>
                                            <div class="clearfix"></div>
                                            <div style="padding-top: 10px" class="btn-group"><button id="btninstanceCookbookDown" class="btn btn-default btn-primary" style="width:30px;height:27px;" type="button">
                                                <i style="font-size:20px;" class="fa fa-angle-double-down">
                                                </i>
                                            </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div style="padding-bottom: 10px; margin-top: 40px;" class="btn-group">
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                </section>
            </div>
        </div>
        <div class="errorContainer" style="display:none"></div>
         
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-primary btnUpdateInstanceRunlist">Update</button>
        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="instanceLogModalContainer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">
            <i class="fa fa-bar-chart-o txt-color-blue"></i>
            Instance Logs
        </h4>
      </div>
      <div class="modal-body">
        <div class="logsArea" style="font-size:12px !important;"></div>
         
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modalTableRunlist" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    Chef-Receipes
                </h4>
            </div>
            <div class="modal-body no-padding">
         

            </div>
             <div class="modal-footer">
                 <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
             </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Modal -->
<div class="modal fade" id="modalDesktopProvisioningLaunch" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    Enter instance details
                </h4>
            </div>
            <div class="modal-body no-padding">
                <form role="form" class="smart-form1">
          <fieldset>
          <div class="">
          <section class="col col-12">
            <div class="form-group">
              <label for="exampleInputEmail1">Instance IP</label>
              <div class="">
                <input type="text" id="instanceIPInput">
              </div>
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Instance Username</label>
              <div class="">
              <input type="text" id="instanceUsernameInput">
            </div>
            </div>
            
            <div class="form-group">
                <label for="exampleInputEmail1">Instance Password</label>
             <div class="">
                <input type="password" id="instancePasswordInput">
            </div>
            </div>
      </section>
    
  </div>

</fieldset>
  </form>
         

            </div>
             <div class="modal-footer">
                 <button type="button" class="btn btn-default btn-primary desktopProvisioningLaunchBtn">Provision</button>
                 <button type="button" class="btn btn-default btn-primary" data-dismiss="modal">Close</button>
             </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="assignedNode" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                    ×
                </button>
                <h4 class="modal-title">
                    <i class="fa fa-sitemap txt-color-blue"></i>&nbsp;&nbsp;Assigned Nodes
                </h4>
            </div>
            <div class="modal-body no-padding">
                <form class="smart-form" id="login-form" action="" novalidate="novalidate">
                    <fieldset style="padding-top:7px !important;">
                        <section>
                            <div class="">
                                <table align="left">
                                 <thead>
                                   <tr style="line-height:2.3">
                                     <th style="width:80%;" scope="col"><u style="font-size:12px;">Name</u>
                                     </th>
                                     <th scope="col"> <u style="font-size:12px;">IP Address</u></th>
                                   </tr>   
                                 </thead>

                                 <tbody class="taskNodeListContainer"> 
                                
                                    </tbody>
                                </table>
                            </div>
                        </section>   
                    </fieldset>
                    <div>
                    
                    </div>
                    <footer>
                        <button class="btn btn-primary" type="submit" data-dismiss="modal">
                            <i class="fa fa-undo fa-1x"></i>&nbsp;Cancel
                        </button>
                    </footer>
                </form>                           
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!--/.modal-assignedNode-->
<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="assignedRunlist" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                    ×
                </button>
                <h4 class="modal-title">
                    <i class="fa fa-list txt-color-blue"></i>&nbsp;&nbsp;Assigned Runlists
                </h4>
            </div>
            <div class="modal-body no-padding">

                <form class="smart-form" id="login-form" action="" novalidate="novalidate">
                    <fieldset style="padding-top:7px !important;">
                       <section class="col col-6">
                            <label class="label">
                                <img src="img/templateicons/Order-run-list---deployment.png">
                                <strong>RunLists</strong>
                            </label>
                            <div class="row">
                                <div class="col col-10">
                                    <ul class="taskRunListContainer" style="border:1px solid #dddddd;list-style:none outside none;min-height:100px;overflow-y:auto;">
                                     
                                    </ul>
                                </div>
                            </div>
                        </section>
                    </fieldset>
                    <div>
                    
                    </div>
                    <footer>
                        <button class="btn btn-primary" type="submit" data-dismiss="modal">
                            <i class="fa fa-undo fa-1x"></i>&nbsp;Cancel
                        </button>
                    </footer>
                </form>                           
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!--/.modal-assignedRunlist-->
<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="assignedExecute" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">
                    ×
                </button>
                <h4 class="modal-title">
                    <i class="fa fa-eraser txt-color-blue"></i>&nbsp;&nbsp;Execute Logs
                </h4>
            </div>
            <div class="modal-body no-padding">

                <form class="smart-form" id="login-form" action="" novalidate="novalidate">
                    <fieldset style="padding-top:7px !important;">
                        <section>

                        <div role="content">
                            <div class="widget-body">

                                <ul id="taskExecuteTabsHeader" class="nav nav-tabs bordered">
                                    <li class="active">
                                        <a href="#a1" data-toggle="tab">MySql_Server</a>
                                    </li>
                                    <li>
                                        <a href="#a2" data-toggle="tab">Web_Server</a>
                                    </li>
                                     <li>
                                        <a href="#a3" data-toggle="tab">chef-user-starter</a>
                                    </li>
                                     <li>
                                        <a href="#a4" data-toggle="tab">docker-c1</a>
                                    </li>
                                    <li class="dropdown dropdownlog">
                                        <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">More... <b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="#a5" data-toggle="tab">Web_Server</a>
                                            </li>
                                            <li>
                                                <a href="#a6" data-toggle="tab">MySql_Server</a>
                                            </li>
                                            <li>
                                                <a href="#a7" data-toggle="tab">azurevm</a>
                                            </li>
                                            <li>
                                                <a href="#a8" data-toggle="tab">chef-docker</a>
                                            </li>
                                        </ul>
                                    </li>
                                   
                                </ul>

                                <div id="taskExecuteTabsContent" class="tab-content padding-10">
                                    <div class="tab-pane fade in active" id="a1">
                                        <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:08 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Starting instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:12 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Connecting to 54.69.61.136</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:16 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:24 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to Install Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:32 GMT</div>
                                                    </div>
                                                    <div  class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 downloading https://www.opscode.com/chef/metadata?v=11&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64 54.69.61.136 to file /tmp/install.sh.971/metadata.txt 54.69.61.136 trying curl... </span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:34 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client again...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installed Chef Client sucessfully</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="a2">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 30 Oct 2014 09:19:53 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Node Imported</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Tue, 04 Nov 2014 20:23:26 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unsucessfully run Web_Server</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:36:53 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Connect 54.69.61.136 to run chef-client ....</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Instance Starting</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:44 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Web_Server instance started.....</span>
                                                    </div>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="a3">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:08 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Starting instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:12 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Connecting to 54.69.61.136</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:16 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:24 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to Install Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:32 GMT</div>
                                                    </div>
                                                    <div  class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 downloading https://www.opscode.com/chef/metadata?v=11&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64 54.69.61.136 to file /tmp/install.sh.971/metadata.txt 54.69.61.136 trying curl... </span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:34 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client again...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installed Chef Client sucessfully</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="a4">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 30 Oct 2014 09:19:53 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Node Imported</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Tue, 04 Nov 2014 20:23:26 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:36:53 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Instance Starting</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to start instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                    </div>
                                     <div class="tab-pane fade" id="a5">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 30 Oct 2014 09:19:53 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Node Imported</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Tue, 04 Nov 2014 20:23:26 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:36:53 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Instance Starting</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to start instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                    </div>
                                     <div class="tab-pane fade" id="a6">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:08 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Starting instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:12 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Connecting to 54.69.61.136</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:16 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:24 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to Install Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:32 GMT</div>
                                                    </div>
                                                    <div  class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 downloading https://www.opscode.com/chef/metadata?v=11&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64 54.69.61.136 to file /tmp/install.sh.971/metadata.txt 54.69.61.136 trying curl... </span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:34 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client again...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installed Chef Client sucessfully</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="a7">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 30 Oct 2014 09:19:53 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Node Imported</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Tue, 04 Nov 2014 20:23:26 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:36:53 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to run chef-client</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Instance Starting</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Wed, 05 Nov 2014 08:57:40 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to start instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="a8">
                                      <div class="logsArea">
                                            <div>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:08 GMT</div></div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8 ">
                                                        <span>Starting instance</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:12 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>Connecting to 54.69.61.136</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:16 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:24 GMT</div>
                                                    </div>
                                                    <div style="color:red;" class="col-lg-8 col-sm-8">
                                                        <span>Unable to Install Chef Client...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:32 GMT</div>
                                                    </div>
                                                    <div  class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 downloading https://www.opscode.com/chef/metadata?v=11&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64 54.69.61.136 to file /tmp/install.sh.971/metadata.txt 54.69.61.136 trying curl... </span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:34 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installing Chef Client again...</span>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row" style="padding-left:20px;">
                                                    <div class="col-lg-4 col-sm-4">
                                                        <div>Thu, 06 Nov 2014 12:09:40 GMT</div>
                                                    </div>
                                                    <div style="color:DarkBlue;" class="col-lg-8 col-sm-8">
                                                        <span>54.69.61.136 Installed Chef Client sucessfully</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        </section>  
                    </fieldset>
                    <footer>
                        <button class="btn btn-primary" type="submit" data-dismiss="modal">
                            <i class="fa fa-undo fa-1x"></i>&nbsp;Cancel
                        </button>
                    </footer>
                </form>                           
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!--/.modal-assignedExecute-->

<script type="text/javascript">

// $(document.body).on('click', '.card', function () {
      
//       document.querySelector('#flip-toggle').classList.toggle('flip');
//   });

//setting the workzone link to current page
//alert(window.location.href);
//alert('what is this');
var wzlink = window.location.href.split('#')[1];
//alert(wzlink);
$('li[navigation*="Workspace"]').find('a').attr('href','#' + wzlink);

var urlParams = {};
(window.onpopstate = function() {
    var url = window.location.href;
    var indexOfQues = url.lastIndexOf("?");
    if (indexOfQues != -1) {
        var sub = url.substring(indexOfQues + 1);
        console.log(sub);
        var params = sub.split('&')
        for (var i = 0; i < params.length; i++) {
            var paramParts = params[i].split('=');
            urlParams[paramParts[0]] = paramParts[1];
        }
    }

})();
console.log(urlParams);
var projectId = urlParams['projid'];
var envId = urlParams['envid'];
var orgId = urlParams['org'];

$('.createTaskLink').click(function(e){
    window.location.href = 'index.html#ajax/assignTask.html?org='+urlParams.org+'&projid='+urlParams['projid']+'&envid='+urlParams['envid'];
});

//for Table view
$('#defaultViewButton').click(); //setting the detault view

$.get('../organizations/' + urlParams.org + '/cookbooks', function(data) {
    console.log(data);
    var cookbooks = data.cookbooks;
    var keys = Object.keys(cookbooks);
    var $deploymentCookbookList = $('.deploymentCookbookList');
    for (i = 0; i < keys.length; i++) {
        $deploymentCookbookList.append($('<li><label class="checkbox" style="margin: 5px;"><input type="checkbox"  name="checkboxCookbooks" value="recipe[' + keys[i] + ']" data-cookbookName="' + keys[i] + '"><i></i>' + keys[i] + '</label></li>'));
    }

});

$.get('../organizations/' + urlParams.org + '/roles', function(data) {
    console.log(data);
    var roles = data.roles;
    var keys = Object.keys(roles);
    var $deploymentRolesList = $('.deploymentRolesList');
    for (i = 0; i < keys.length; i++) {
        $deploymentRolesList.append($('<li><label class="checkbox" style="margin: 5px;"><input type="checkbox"  name="checkboxRoles" value="role[' + keys[i] + ']" data-roleName="' + keys[i] + '"><i></i>' + keys[i] + '</label></li>'));
    }

});

$('#btnDeploymentAddSelectedCookbook').click(function(e) {
    var $deploymentSelectedList = $('.deploymentSelectedRunList');
    var $selectedCookbooks = $("input[name=checkboxCookbooks]:checked");
    $selectedCookbooks.each(function(idx) {
        var $this = $(this);
        $deploymentSelectedList.append($('<li><label style="margin: 5px;"><input type="hidden" value="' + $this.val() + '"/>' + $this.attr('data-cookbookName') + '</label></li>').on('click', function(e) {
            if ($(this).hasClass('deploymentCookbookSelected')) {
                $(this).removeClass('deploymentCookbookSelected');
            } else {
                $(this).addClass('deploymentCookbookSelected');
            }
        }));
        $this.attr('checked', false);
        $this.parents('li').hide();

    });

    var $selectedRoles = $("input[name=checkboxRoles]:checked");
    $selectedRoles.each(function(idx) {
        var $this = $(this);
        $deploymentSelectedList.append($('<li><label style="margin: 5px;"><input type="hidden" value="' + $this.val() + '"/>' + $this.attr('data-roleName') + '</label></li>').on('click', function(e) {
            if ($(this).hasClass('deploymentCookbookSelected')) {
                $(this).removeClass('deploymentCookbookSelected');
            } else {
                $(this).addClass('deploymentCookbookSelected');
            }
        }));
        $this.attr('checked', false);
        $this.parents('li').hide();


    });

    $deploymentSelectedList.sortable({
        cursor: "move"
    });
});

$('#btnDeploymentRemoveSelectedCookbook').click(function(e) {
    var $deploymentSelectedList = $('.deploymentSelectedRunList');
    $deploymentSelectedList.find('.deploymentCookbookSelected').each(function() {
        var value = $(this).find('input').val();
        var selector = 'input[name=checkboxRoles][value="' + value + '"]';
        console.log(selector);
        $('input[name=checkboxRoles][value="' + value + '"]').parents('li').show();
        $('input[name=checkboxCookbooks][value="' + value + '"]').parents('li').show();
        $(this).remove();

    });

});




$('.deploymentChefRunBtn').click(function(e) {

    var $selectedNodes = $('input[name=deploymentNodesCheckBox]:checked');
    var $runlistInput = $('.deploymentSelectedRunList input');
    var runlist = [];
    $runlistInput.each(function() {
        runlist.push($(this).val());
    });
    console.log(runlist);
    $selectedNodes.each(function(e) {
        $.post('../instances/' + $(this).val() + '/updateRunlist', {
            runlist: runlist
        }, function(data) {
            console.log('instance runlist updated');
        });
    })



});


$('.dockerinstancestart').click(function(e){
    $('.instanceselectedfordocker').each(function(){
      if($(this).is(':checked')){
        
        var instid = $(this).closest('tr').attr('data-instanceid');
        if(instid)
          var $that = $(this);
            var $td =$that.closest('td');
            var tdtext = $td.text();
            $td.find('.dockerspinner').detach();
            $td.find('.dockermessage').detach();
            $td.append('<img class="dockerspinner" style="margin-left:5px" src="img/select2-spinner.gif"></img>');
            $td.attr('title','Pulling in Images');
          $.get('/instances/dockerimagepull/' + instid,function(data){
            if(data == "OK"){
                var $statmessage = $td.find('.dockerspinner').parent();
                $td.find('.dockerspinner').detach();
                $td.find('.dockermessage').detach();
                $statmessage.append('<span style="margin-left:5px;text-decoration:none" class="dockermessage">Pull done</span>');
                }
                else
                {
                    var $statmessage = $('.dockerspinner').parent();
                    $('.dockerspinner').detach();
                    $td.find('.dockermessage').detach();
                    $statmessage.append('<span style="margin-left:5px;color:red" title="' + data + '"  class="dockermessage">Errored</span>');
                }
          });
      }
    });
});


$.get('../organizations/' + orgId + '/projects/' + projectId + '/environments/' + envId + '/tasks', function(data) {
    var $taskListArea = $('.taskListArea').empty();
    for (var i = 0; i < data.length; i++) {
        var $tr = $('<tr></tr>');
        var $tdName = $('<td></td>').append(data[i].name);
        $tr.append($tdName);
        var $tdNodeList = $('<td></td>').append('<a data-toggle="modal" class="btn btn-primary btn-sg tableactionbutton"><i class="ace-icon fa fa-sitemap fa-14x"></i></a>');
        $tdNodeList.find('a').data('nodeList', data[i].nodesIdList).click(function(e) {
            $.post('../instances/', {
                instanceIds: $(this).data('nodeList')
            }, function(instances) {
                var $taskNodeListContainer = $('.taskNodeListContainer').empty();
                for (var i = 0; i < instances.length; i++) {
                    var $tr = $('<tr></tr>').css({
                        'line-height': '2.1'
                    });
                    var $tdInstanceName = $('<td></td>').append(instances[i].chef.chefNodeName).css({
                        'font-size': '12px'
                    });
                    var $tdInstanceIp = $('<td></td>').append(instances[i].instanceIP).css({
                        'font-size': '12px'
                    });
                    $tr.append($tdInstanceName).append($tdInstanceIp);
                    $taskNodeListContainer.append($tr);
                }
                $('#assignedNode').modal('show');
            });


        });
        $tr.append($tdNodeList);

        var $tdRunlist = $('<td></td>').append('<a data-toggle="modal" href="#assignedRunlist" class="btn btn-primary btn-sg tableactionbutton"><i class="ace-icon fa fa-list-ul bigger-120"></i></a>');
        $tdRunlist.find('a').data('taskRunlist', data[i].runlist).click(function(e) {
            var $taskRunListContainer = $('.taskRunListContainer').empty();
            var runlist = $(this).data('taskRunlist');
            if (runlist && runlist.length) {
                for (var i = 0; i < runlist.length; i++) {
                    $li = $('<li></li>').append(runlist[i]).css({
                        "font-size": "12px"
                    });
                    $taskRunListContainer.append($li);
                }
            }
            $('#assignedRunlist').modal('show');
        });
        $tr.append($tdRunlist);

        var $tdExecute = $('<td></td>').append('<a data-toggle="modal" href="#assignedExecute" class="btn btn-primary btn-sg tableactionbutton"><i class="ace-icon fa fa-play bigger-120"></i></a>');
        $tdExecute.find('a').data('taskId', data[i]._id).click(function(e) {
            var taskId = $(this).data('taskId');
            var $taskExecuteTabsHeaderContainer = $('#taskExecuteTabsHeader').empty();
            var $taskExecuteTabsContent = $('#taskExecuteTabsContent').empty();
            $.get('../tasks/' + taskId + '/run', function(instances) {

                for (var i = 0; i < instances.length; i++) {
                    var $liHeader = $('<li><a href="#tab_' + instances[i]._id + '" data-toggle="tab" data-taskInstanceId="' + instances[i]._id + '">' + instances[i].chef.chefNodeName + '</a></li>');
                    if (i === 4) {
                        var $liMoreHeader = $('<li class="dropdown dropdownlog"><a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">More... <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>');

                        $taskExecuteTabsHeaderContainer.append($liMoreHeader);

                        $taskExecuteTabsHeaderContainer = $liMoreHeader.find(ul);

                    }

                    $taskExecuteTabsHeaderContainer.append($liHeader);

                    var $tabContent = $('<div class="tab-pane fade" id="tab_' + instances[i]._id + '"><div class="taskLogArea" style="height:400px !important;overflow: scroll;padding-left: 20px;"></div></div>');

                    $taskExecuteTabsContent.append($tabContent);


                }
                //shown event



                $('#taskExecuteTabsHeader').find('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
                    $(e.target).attr('data-taskPolling', 'true');
                    var tabId = $(e.target).attr('href')
                    pollTaskLogs($(this), $(tabId), null, 0, false);
                    //e.relatedTarget // previous active tab
                });

                $('#taskExecuteTabsHeader').find('a[data-toggle="tab"]').on('hidden.bs.tab', function(e) {
                    $(e.target).attr('data-taskPolling', 'false');
                    //e.relatedTarget // previous active tab
                }).first().click();
 
                $('#assignedExecute').modal('show');



            });



        });
        $tr.append($tdExecute);
         var timestamp = "";
        if(data[i].lastRunTimestamp) {
            var date = new Date().setTime(data[i].lastRunTimestamp);
            timestamp = new Date(date).toUTCString(); //converts to human readable strings
        }
       
        var $tdTime = $('<td></td>').append(timestamp);
        $tr.append($tdTime);

        var $tdOptions = $('<td></td>').append('<div class="btn-group tableactionWidth"><a rel="tooltip" data-placement="top" data-original-title="Delete" class="btn btn-danger pull-left btn-sg tableactionbutton btnDeleteTask" data-taskId="'+data[i]._id+'"><i class="ace-icon fa fa-trash-o bigger-120"></i></a><a rel="tooltip" data-placement="top" data-original-title="Edit" class="btn btn-info pull-left tableactionbutton tableactionbuttonpadding btn-sg"><i class="ace-icon fa fa-pencil bigger-120"></i></a></div>');
        $tdOptions.find('.btnDeleteTask').click(function(e){
            var taskId = $(this).attr('data-taskId');
          var that = this;
          $.ajax({
            url:'../tasks/'+taskId,
            method:'DELETE',
            success:function(data){
              $(that).parents('tr').remove();
            }
          })
        });
        $tr.append($tdOptions);

        $taskListArea.append($tr);

    }

    function pollTaskLogs($tabLink, $tab, timestamp, delay, clearData) {
        var instanceId = $tabLink.attr('data-taskInstanceId');
        var timestamp = $tabLink.attr('data-taskPollLastTimestamp');
        var poll = $tabLink.attr('data-taskPolling');

        if (poll !== 'true') {
            console.log('not polling');
            return;
        }


        var url = '../instances/' + instanceId + '/logs';
        if (timestamp) {
            url = url + '?timestamp=' + timestamp;
        }

        timeout = setTimeout(function() {
            $.get(url, function(data) {
                var $modalBody = $tab.find('.taskLogArea')
                if (clearData) {
                    $modalBody.empty();
                }
                var $table = $('<div></div>');

                for (var i = 0; i < data.length; i++) {
                    var $rowDiv = $('<div class="row"></div>');
                    var timeString = new Date().setTime(data[i].timestamp);
                    var date = new Date(timeString).toUTCString(); //converts to human readable strings
                    $rowDiv.append($('<div class="col-lg-4 col-sm-4"></div>').append('<div>' + date + '</div>'));

                    if (data[i].err) {
                        $rowDiv.append($('<div class="col-lg-8 col-sm-8" style="color:red;"></div>').append('<span>' + data[i].log + '</span>'));
                    } else {
                        $rowDiv.append($('<div class="col-lg-8 col-sm-8 " style="color:DarkBlue;"></div>').append('<span>' + data[i].log + '</span>'));
                    }

                    $table.append($rowDiv);
                    $table.append('<hr/>');

                }


                if (data.length) {
                    lastTimestamp = data[data.length - 1].timestamp;
                    console.log(lastTimestamp);
                    $modalBody.append($table);
                    $modalBody.scrollTop($modalBody[0].scrollHeight + 100);
                     $tabLink.attr('data-taskPollLastTimestamp',data[data.length - 1].timestamp);
                   
                }


                console.log('polling again');
                if ($tabLink.attr('data-taskPolling') === 'true' && $('#assignedExecute').data()['bs.modal'].isShown) {

                    pollTaskLogs($tabLink, $tab,  $tabLink.attr('data-taskPollLastTimestamp'), 1000, false);

                } else {
                    console.log('not polling again');
                }
            });
        }, delay);
    }


});
$.get('../organizations/'+orgId+'/projects/' + projectId + '/environments/' + envId + '/blueprints', function(data) {

    var $AppFactpanelBody = $('.appFactoryPanel').find('.panel-body');
    $AppFactpanelBody.empty();

    var $devopsRolepanelBody = $('.devopsRolePanel').find('.panel-body');
    $devopsRolepanelBody.empty();

    var $desktopProvisioningPanelBody = $('.desktopProvisioningPanel').find('.panel-body');
    $devopsRolepanelBody.empty();

    //alert(orgId + "/" + projectId + "/" + envId + data.length);

    //Displaying the Template Types.
    $.get("/d4dMasters/readmasterjson/16",function(tdata){

        var rowLength = JSON.stringify(tdata.masterjson.rows.row.length);
        var $containerTemp = "";
        var selectedrow = false;
        var getDesignTypeImg; var getDesignTypeRowID;
        $('#accordion-2').empty();
        for(var i=0; i<rowLength; i+=1){
             getDesignTypeImg= "";
             getDesignTypeRowID= "";
            for(var x=0;x < tdata.masterjson.rows.row[i].field.length;x++){
                if(tdata.masterjson.rows.row[i].field[x].name == "rowid"){
                  getDesignTypeRowID = tdata.masterjson.rows.row[i].field[x].values.value;
                }
                if(tdata.masterjson.rows.row[i].field[x].name == "designtemplateicon_filename"){
                  getDesignTypeImg = tdata.masterjson.rows.row[i].field[x].values.value;
                  
                }
                if(tdata.masterjson.rows.row[i].field[x].name == "templatetypename"){
                  getDesignTypeName = tdata.masterjson.rows.row[i].field[x].values.value;
                  
                }
            }
        //Extracting the TT definitions. Add New Template types
        var $currRolePanel = null;
        switch (getDesignTypeName){
            case "AppFactory":
                $AppFactpanelBody = $('<div class="panel-body AppFactory"></div>');
                $currRolePanel = $AppFactpanelBody;
                break;
            case "DevopsRoles":
                $DevopsRolespanelBody = $('<div class="panel-body DevopsRoles"></div>');
                $currRolePanel = $DevopsRolespanelBody;
                break;
            case "CloudFormation":
                $CloudFormationBody = $('<div class="panel-body CloudFormation"></div>');
                $currRolePanel = $CloudFormationBody;
                break;
            case "Docker":
                $DockerpanelBody = $('<div class="panel-body Docker"></div>');
                $currRolePanel = $DockerpanelBody;
                break;
            case "Desktop":
                $DesktopProvisioningPanelBody = $('<div class="panel-body Desktop"></div>');
                $currRolePanel = $DesktopProvisioningPanelBody;
                break;
            case "Environment":
                $EnvironmentpanelBody = $('<div class="panel-body Environment"></div>');
                $currRolePanel = $EnvironmentpanelBody;
                break;

        }


        $containerTemp = '<div class="panel panel-default blueprintContainer">' + 
                        '<div class="panel-heading">' + 

                        '<h4 class="panel-title">' + 
                        '<a href="#collapse' + i + '" data-parent="#accordion-2" data-toggle="collapse" class="collapsed"> ' + 
                        '<i class="fa fa-fw fa-plus-circle txt-color-blue"></i> ' + 
                        '<i class="fa fa-fw fa-minus-circle txt-color-red"></i>' + getDesignTypeName + '</a>' + 
                        '</h4></div><div class="panel-collapse collapse" id="collapse' + i + '">' + 
                        '<div class="panel-body ' + getDesignTypeName + '"></div>' + 
                        '</div>';
       // $($containerTemp).find('#collapse' + i).append($currRolePanel);
       /*if($('#accordion-2').find('#collapse' + i).length > 0){
        alert('in');
        $('#accordion-2').find('#collapse' + i).first().append($containerTemp);
       }*/
       $('#accordion-2').append($containerTemp);
                           
    }
         //To fix template id and template type
        // alert('in' + data.length);
         for (var i = 0; i < data.length; i++) {
           //alert(JSON.stringify(data[i]));
            //Find a panel-body with the template type class
            var $currRolePanel = $('#accordion-2').find('.' + data[i].templateType);
         //   alert($currRolePanel.length);
            if($currRolePanel.length > 0){
                var $itemContainer = $('<div></div>').addClass("productdiv4");

                var $itemBody = $('<div></div>').addClass('productdiv1 cardimage').attr('data-blueprintId', data[i]._id).attr('data-projectId', data[i].projectId).attr('data-envId', data[i].envId).attr('data-chefServerId', data[i].chefServerId).attr('data-templateType', data[i].templateType);
                var $ul = $('<ul></ul>').addClass('list-unstyled system-prop').css({
                    'text-align': 'center'
                });
                var $img
                if(data[i].iconpath)
                    $img = $('<img />').attr('src', data[i].iconpath).attr('alt', data[i].name).addClass('cardLogo');
                else
                    $img = $('<img />').attr('src', '').attr('alt', data[i].name).addClass('cardLogo');
                var $liImage = $('<li></li>').append($img);
                $ul.append($liImage);
                //Arabinda changed the css below licardName //.css({"font-size":'12px',"overflow": 'hidden',"padding-left": '7px',"text-overflow": 'ellipsis',"white-space": 'nowrap'})
                var $liCardName = $('<li title="' + data[i].name + '"></li>').addClass('Cardtextoverflow').html('<u><b>' + data[i].name + '</b></u>');
                
                $ul.append($liCardName);
                var $selecteditBtnContainer = $('<div style="position:absolute;padding-left:27px;bottom:11px;"></div>');
                if (data[i].versionsList) {
                    var $selectVerEdit = $('<a style="padding:0px 4px;margin-left:3px;border-radius:5px;" class="bpEditBtn"><i class="ace-icon fa fa-pencil"></i></a>').addClass('btn btn-primary').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'Edit');
                    var $selectVer = null;
                    var tagLabel = '';
                    //Docker Check
                    if(data[i].templateType == "Docker")
                     {
                        //$selectVer = $('<select style="padding:1px;"></select>').addClass('blueprintVersionDropDown').attr('data-blueprintId', data[i]._id);
                        $selectVer = $('<select style="padding:1px;margin-right:5px;"></select>').addClass('dockerrepotagselect').attr('data-blueprintId', data[i]._id);
                        $itemBody.attr('dockerreponame',data[i].dockerreponame);
                        $itemBody.attr('dockerrepotags',data[i].dockerrepotags);
                        var $liDockerRepoName = $('<li title="Docker Repo Name" ><i class="fa fa-check-square" style="padding-right:5px"/>' + data[i].dockerreponame + '</li>');
                        $ul.append($liDockerRepoName);
                       if(data[i].dockerrepotags != ''){
                        $selectVer.empty();
                        var dockerrepostags = data[i].dockerrepotags.split(',');
                           $.each(dockerrepostags,function(k){
                                    $selectVer.append('<option value="' + dockerrepostags[k] + '">' + dockerrepostags[k] + '</option>');
                            });
                        } 
                        
                       $selectVerEdit.hide();
                       tagLabel = '<span>Tags&nbsp;</span';
                        //alert(JSON.stringify(data[i]));
                    }
                    else   {
                            $selectVer = $('<select style="padding:1px;padding-left:5px;"></select>').addClass('blueprintVersionDropDown').attr('data-blueprintId', data[i]._id);
                            $selectVerEdit.click(function(e) {
                                
                                var $parent = $(this).parents('.cardimage');
                                var $blueprintEditResultContainer = $('#blueprintEditResultContainer');
                                $blueprintEditResultContainer.find('.modal-body').empty().append('<img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/loading.gif" />');
                                $blueprintEditResultContainer.modal('show');

                                var projectId = $parent.attr('data-projectId');
                                var envId = $parent.attr('data-envId');
                                var blueprintId = $parent.attr('data-blueprintId');
                                var chefServerId = $parent.attr('data-chefServerId');
                                var version = $parent.find('.blueprintVersionDropDown').val();
                                $.get('../blueprints/' + blueprintId + '/versions/' + version, function(data) {
                                    $.get('../chef/servers/' + chefServerId + '/cookbooks', function(data) {
                                        var keys = Object.keys(data);

                                        var $cookbooksList = $('<select></select>').addClass('blueprintChefCookbookList').attr('data-blueprintId', blueprintId).attr('multiple', true);
                                        for (var i = 0; i < keys.length; i++) {
                                            var $option = $('<option></option>').append(keys[i]).val('recipe[' + keys[i] + ']');
                                            $cookbooksList.append($option);
                                        }
                                        $blueprintEditResultContainer.find('.modal-body').empty();
                                        $blueprintEditResultContainer.find('.modal-body').append($cookbooksList);

                                    }).error(function() {
                                        $blueprintEditResultContainer.find('.modal-body').empty();
                                        $blueprintEditResultContainer.find('.modal-body').append('<span>Oops! Something went wrong. Please try again later</span>');
                                    });
                                }).error(function() {
                                    $blueprintEditResultContainer.find('.modal-body').empty();
                                    $blueprintEditResultContainer.find('.modal-body').append('<span>Oops! Something went wrong. Please try again later</span>');
                                });

                            });
                    }
                    var $li = $('<li></li>').css({
                        "font-size": '10px'
                    }).append(tagLabel,$selectVer, $selectVerEdit);
                    for (var j = 0; j < data[i].versionsList.length; j++) {
                        var $options = $('<option></option>').append(data[i].versionsList[j].ver).val(data[i].versionsList[j].ver);
                        $selectVer.append($options);
                    }
                    $selecteditBtnContainer.append($li);
                }
                $itemBody.append($ul);
                $itemBody.append($selecteditBtnContainer);
                $itemContainer.append($itemBody);

                //Find the template type container and add to it.
                //var $currpanel = $('#accordion-2').find('div[".' +  data[i].templateType + '"]').first();
                //alert($currpanel.length);
                $currRolePanel.append($itemContainer);
               // alert($currRolePanel.html());
                $currRolePanel.parent().parent().show();
                //Attaching the selection event.
                if(i == (data.length - 1)){
                    var $productdiv1 = $('.productdiv1');
                    //alert($productdiv1.length);
                    $productdiv1.click(function(e) {
                        //alert('yes');
                        $productdiv1.removeClass('role-Selected1');
                        $(this).addClass('role-Selected1');
                    });
                }
                //Expanding the fist Accordion.
                if($('#accordion-2').length > 0)
                    $('#accordion-2').find('a').first().trigger('click');
            }
         }

        // $("#myTabContent3").append(containerTemp);   
        // $("#templateContent #grid0").addClass("role-Selected");
    

    }); //end of readmasterjson to be pushed to the end of the function.

    
    /*

    var expanded = false;
    if($l != "undefined"){
    if ($l.children().length) {
        var $devopsRolePanel = $devopsRolepanelBody.parents('.devopsRolePanel').show();
        $devopsRolePanel.find('.collapse').addClass('in');
        expanded = true;
    }
    }

    if ($AppFactpanelBody.children().length) {
        var $appFactoryPanel = $AppFactpanelBody.parents('.appFactoryPanel').show();
        if (!expanded) {
            $appFactoryPanel.find('.collapse').addClass('in');
            expanded = true;
            $appFactoryPanel.find('.panel-title a').removeClass('collapsed');
        } else {
            $appFactoryPanel.find('.panel-title a').addClass('collapsed');
        }
    }
    if ($desktopProvisioningPanelBody.children().length) {
        var $desktopProvisioningPanel = $desktopProvisioningPanelBody.parents('.desktopProvisioningPanel').show();
        if (!expanded) {
            $desktopProvisioningPanel.find('.collapse').addClass('in');
            $desktopProvisioningPanel.find('.panel-title a').removeClass('collapsed');
        } else {
            $desktopProvisioningPanel.find('.panel-title a').addClass('collapsed');
        }
        
    }*/


    pageSetUp();

});

$(document).ready(function(){
    //Expanding the first accordion
    
   //alert($('#accordion-2').find('a').first().html());
   $('.dockerrepotagselect').parent().prepend('Tags&nbsp;');

});

function getCssClassFromStatus(status) {
    var cssClasses = {

    };
    switch (status) {

        case 'running':
            cssClasses.ringClass = 'started';
            cssClasses.textClass = 'instance-state-text-started';
            cssClasses.tableViewStatusClass = "started";
            break;

        case 'stopped':
            cssClasses.ringClass = 'stopped';
            cssClasses.textClass = 'instance-state-text-stopped';
            cssClasses.tableViewStatusClass = "stopped";
            break;

        case 'terminated':
            cssClasses.ringClass = 'stopped';
            cssClasses.textClass = 'instance-state-text-stopped';
            cssClasses.tableViewStatusClass = "stopped";
            break;

        default:
            cssClasses.ringClass = 'pending';
            cssClasses.textClass = 'instance-state-text-pending';
            cssClasses.tableViewStatusClass = "pending";

    }

    return cssClasses;
}


function pollInstanceState(instanceId, state, delay) {
    var $parent = $('.domain-roles-caption[data-instanceId="' + instanceId + '"]');
    var timeout = setTimeout(function() {
        $.get('../instances/' + instanceId, function(data) {
            if (data) {
                if (data.instanceState === state) {
                    pollInstanceState(instanceId, state, 5000);
                } else {
                    console.log('polling complete');
                    var cssClassed = getCssClassFromStatus(data.instanceState);
                    $parent.find('.componentlistContainer').removeClass().addClass('componentlistContainer').addClass(cssClassed.ringClass);
                    $parent.find('.instance-state').removeClass().addClass('instance-state').addClass(cssClassed.textClass).html(data.instanceState);
                    $('.instancestatusindicator[data-instanceId="' + instanceId + '"]').removeClass().addClass('instancestatusindicator').addClass(cssClassed.tableViewStatusClass);
                    $parent.find('.instance-details-id strong').html(data.instanceIP);
                    $('tr[data-instanceId="' + instanceId + '"] td.instanceIPCol').html(data.instanceIP);
                }
            }
        })
    }, delay);
}


var startStopInstanceHandler = function(e) {
    var $this = $(this);
    var instanceId = $this.parents('.instanceActionBtnCtr').attr('data-instanceId');;
    var type = $this.attr('data-actionType');
    url = '../instances/' + instanceId + '/startInstance';
    if (type === 'stop') {
        url = '../instances/' + instanceId + '/stopInstance'
    }
    var $parent = $('.domain-roles-caption[data-instanceId="' + instanceId + '"]');
    $parent.find('.moreInfo').trigger('click');
    $.get(url, function(data) {

        console.log($parent.length, $parent);



        var cssClassed = getCssClassFromStatus(data.instanceCurrentState);

        var oldState = data.instanceCurrentState;


        $parent.find('.componentlistContainer').removeClass().addClass('componentlistContainer').addClass(cssClassed.ringClass);

        $parent.find('.instance-state').removeClass().addClass('instance-state').addClass(cssClassed.textClass).html(data.instanceCurrentState);

        $('.instancestatusindicator[data-instanceId="' + instanceId + '"]').removeClass().addClass('instancestatusindicator').addClass(cssClassed.tableViewStatusClass);

        pollInstanceState(instanceId, oldState, 2000);
    });
}


$("#btnaddInstanceCookbooks").on('click', function () {

        var $options = $('#instanceCookbookList option:selected');
        var $selectedList = $("#instanceCookbookSelectedList");
        $options.each(function(){
            var $this = $(this);
            $selectedList.append($this.clone());
            $this.hide();
        });
        
    });
    $("#btnremoveinstanceCoookbooks").on('click', function () {
        var $instanceCookbookList = $('#instanceCookbookList');

        $("#instanceCookbookSelectedList option:selected").each(function(){
           var $this = $(this);
           var value = $this.val();
           $this.remove();
           $instanceCookbookList.find('option[value="'+value+'"]').show();

        });
    });

    $("#btninstanceCookbookUp").on('click', function () {
        $("#instanceCookbookSelectedList option:selected").each(function () {
            var listItem = $(this);
            var listItemPosition = $("#instanceCookbookSelectedList option").index(listItem) + 1;

            if (listItemPosition == 1) return false;

            listItem.insertBefore(listItem.prev());
        });

    });

    $("#btninstanceCookbookDown").on('click', function () {
        var itemsCount = $("#instanceCookbookSelectedList option").length;

        $($("#instanceCookbookSelectedList option:selected").get().reverse()).each(function () {
            var listItem = $(this);
            var listItemPosition = $("#instanceCookbookSelectedList option").index(listItem) + 1;

            if (listItemPosition == itemsCount) return false;

            listItem.insertAfter(listItem.next());

        });
    });


var instanceUpdateRunlistHandler = function(e) {
    var $this = $(this);
    var instanceId = $this.attr('data-instanceId');
    var chefServerId = $this.attr('data-chefServerId');

    //console.log(i+nstanceId);
    $chefRunModalContainer = $('#chefRunModalContainer');
    $chefRunModalContainer.find('.loadingContainer').show();
    $chefRunModalContainer.find('.smart-form').hide();
    $chefRunModalContainer.find('.errorContainer').hide();
    $chefRunModalContainer.modal('show');

    //$demoChefClientRun = '';
    //$chefRunModalContainer.find('.modal-body').empty().append($demoChefClientRun);
    //alert(chefServerId);
    $.get('../chef/servers/' + chefServerId + '/cookbooks', function(data) {
        var keys = Object.keys(data);
        var $cookbooksList = $("#instanceCookbookList").empty().attr('data-instanceId', instanceId).attr('multiple', true);

        

        for (var i = 0; i < keys.length; i++) {
            var $option = $('<option></option>').append(keys[i]).val('recipe[' + keys[i] + ']');
            $cookbooksList.append($option);
        }

        var $selectedList = $("#instanceCookbookSelectedList").empty();
        var $instanceCookbookList = $('#instanceCookbookList');
        var runlist = $this.data('runlist');
        console.log(runlist);
        if(runlist) {
            //console.log(runlist);
            for(var i=0;i<runlist.length;i++) {
                //var $runlistString = runlist[i];
                //console.log($runlistString);
                
                
                var newsubStringRunlist = runlist[i].split('[');
                if(newsubStringRunlist.length == 2) {
                    newsubStringRunlist = newsubStringRunlist[1];
                }
               var $option = $('<option></option>').append(newsubStringRunlist.split(']')[0]).val(runlist[i]);
              $selectedList.append($option);
              $instanceCookbookList.find('option[value="'+runlist[i]+'"]').hide();
            }
        } 



        $chefRunModalContainer.find('.loadingContainer').hide();
        $chefRunModalContainer.find('.smart-form').show();
        //$demoChefClientRun.append($cookbooksList);
        //$chefRunModalContainer.find('.modal-body').empty().append($cookbooksList);

    }).error(function() {
         $chefRunModalContainer.find('.loadingContainer').hide();
         $chefRunModalContainer.find('.smart-form').hide();
        $chefRunModalContainer.find('.errorContainer').empty().append('<span>Oops! Something went wrong. Please try again later</span>').show();
    });
   

};

var instanceLogsHandler = function(e) {
    var instanceId = $(this).attr('data-instanceId');
    var timeout;
    var $instanceLogModalContainer = $('#instanceLogModalContainer');
    $instanceLogModalContainer.on('hidden.bs.modal', function(e) {
        $instanceLogModalContainer.off('hidden.bs.modal');
        if (timeout) {
            clearTimeout(timeout);
        }
    });
    $instanceLogModalContainer.find('.logsArea').empty().append('<img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/loading.gif" />');
    $instanceLogModalContainer.modal('show');
    var lastTimestamp;

    function pollLogs(timestamp, delay, clearData) {
        var url = '../instances/' + instanceId + '/logs';
        if (timestamp) {
            url = url + '?timestamp=' + timestamp;
        }

        timeout = setTimeout(function() {
            $.get(url, function(data) {
                var $modalBody = $instanceLogModalContainer.find('.logsArea')
                if (clearData) {
                    $modalBody.empty();
                }
                var $table = $('<div></div>');

                for (var i = 0; i < data.length; i++) {
                    var $rowDiv = $('<div class="row"></div>');
                    var timeString = new Date().setTime(data[i].timestamp);
                    var date = new Date(timeString).toUTCString(); //converts to human readable strings
                    $rowDiv.append($('<div class="col-lg-4 col-sm-4"></div>').append('<div>' + date + '</div>'));

                    if (data[i].err) {
                        $rowDiv.append($('<div class="col-lg-8 col-sm-8" style="color:red;"></div>').append('<span>' + data[i].log + '</span>'));
                    } else {
                        $rowDiv.append($('<div class="col-lg-8 col-sm-8 " style="color:DarkBlue;"></div>').append('<span>' + data[i].log + '</span>'));
                    }

                    $table.append($rowDiv);
                    $table.append('<hr/>');

                }


                if (data.length) {
                    lastTimestamp = data[data.length - 1].timestamp;
                    console.log(lastTimestamp);
                    $modalBody.append($table);
                    $modalBody.scrollTop($modalBody[0].scrollHeight + 100);
                }


                console.log('polling again');
                if ($instanceLogModalContainer.data()['bs.modal'].isShown) {
                    pollLogs(lastTimestamp, 1000, false);
                } else {
                    console.log('not polling again');
                }
            });
        }, delay);
    }
    pollLogs(lastTimestamp, 0, true);
};



function addInstanceToDOM(data) {
    var $divinstancescardview = $('#divinstancescardview .carousel-inner');
    var $carouselItemContainers = $divinstancescardview.find('.item');
    var $instancesList = null;
    var $item = null;
    if(!$carouselItemContainers.length) {
        //creating Item tag
        $item = $('<div></div>').addClass('item');
        $instancesList = $('<ul></ul>').addClass("thumbnails marginleft-40 padding-top-30 list-unstyled instancesList");
        $item.append($instancesList);
        $divinstancescardview.append($item);
    } else {
        var $item = $($carouselItemContainers.get($carouselItemContainers.length -1));
        var $instancesList = $item.find('ul');
        if($instancesList.children().length === 5) {

            $item = $('<div></div>').addClass('item');
            $instancesList = $('<ul></ul>').addClass("thumbnails marginleft-40 padding-top-30 list-unstyled instancesList");
            $item.append($instancesList);
            $divinstancescardview.append($item);

        }
    }
  
    var $deploymentNodeList = $('.deploymentNodeList');

    $deploymentNodeList.append($('<li><label class="checkbox" style="margin: 5px;font-size:13px;"><input type="checkbox" name="deploymentNodesCheckBox" value="' + data._id + '"><i></i>' + data.chefNodeName + '</label></li>'));

    var $rowContainter = $('<tr data-instanceId="' + data._id + '"></tr>');


    var $li = $('<li></li>').addClass('domain-role-thumbnail');
    var $container = $('<div class="flip-toggle"></div>').addClass('container'); //<div class="container" id="flip-toggle">
    var $card = $('<div></div>').addClass('card'); //<div class="card">
    var $front = $('<div></div>').addClass('front'); //<div class="front">
    var $div = $('<div></div>').addClass('domain-roles ');
    var $divDomainRolesCaption = $('<div></div>').addClass('domain-roles-caption').attr('data-instanceId', data._id);
    var $divHeading = $('<div></div>').addClass('domain-roles-heading');


    var $spanheadingLeft = $('<span></span>').addClass('domain-roles-icon').html('<img src="'+data.blueprintData.iconPath+'" style="margin-right:5px;margin-top:-10px;width:27px"/>').attr('contenteditable', 'false');

    var $spanheadingMiddle = $('<span>' + data.blueprintData.blueprintName + '</span>').addClass('cardHeadingTextoverflow').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', ''+ data.blueprintData.blueprintName +'');
    var $spanheadingRight = $('<span></span>').css({
        'float': 'right'
    }).append($('<a href="javascript:void(0)" data-instanceId="' + data._id + '"></a>').addClass('moreInfo').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'MoreInfo'));

    $divHeading.append($spanheadingLeft);
    $divHeading.append($spanheadingMiddle);
    $divHeading.append($spanheadingRight);
    $divDomainRolesCaption.append($divHeading);
    $divDomainRolesCaption.append($('<hr>'));
    var $divComponentListContainer;
    var $tdInstanceStatusIndicator;

    if (data.instanceState == 'running') {
        $divComponentListContainer = $('<div></div>').addClass('componentlistContainer started');
        $tableInstanceStatusIndicator = $('<td></td>').addClass('instancestatusindicator started');
    } else if (data.instanceState == 'terminated') {
        $divComponentListContainer = $('<div></div>').addClass('componentlistContainer stopped');
        $tableInstanceStatusIndicator = $('<td></td>').addClass('instancestatusindicator stopped');
    } else if (data.instanceState == 'stopped') {
        $divComponentListContainer = $('<div></div>').addClass('componentlistContainer stopped');
        $tableInstanceStatusIndicator = $('<td></td>').addClass('instancestatusindicator stopped');
    } else {
        $divComponentListContainer = $('<div></div>').addClass('componentlistContainer pending');
        $tableInstanceStatusIndicator = $('<td></td>').addClass('instancestatusindicator pending');
    }
    $tableInstanceStatusIndicator.attr('data-instanceId', data._id);


    $divComponentList = $('<div></div>').addClass('instance-bootstrap-list');

    /*for(var j=0;j<data.runlist.length;j++) { 
          var $divComponentItem;
           if(j == 0) {
          
            $divComponentItem = $('<span title="'+data.runlist[j]+'" style="margin-top:8px;overflow:hidden;text-overflow:ellipsis;width:62px;"></span>').addClass('instance-details-item').append(data.runlist[j]);

           } else {
            $divComponentItem = $('<span title="'+data.runlist[j]+'" style="overflow:hidden;text-overflow:ellipsis;width:62px;"></span>').addClass('instance-details-item').append(data.runlist[j]);
           }
           $divComponentList.append($divComponentItem);
            if(j==2) {
                break;
            }
        }*/
    //var $backdivai = $('<i></i>').addClass('fa fa-lg fa-fw fa-book txt-color-blue');
    $divComponentItem = $('<span style="overflow:hidden;text-overflow:ellipsis;width:62px;padding-right:0px;"></span>').addClass('instance-details-item').append($('<a class="btn"><i class="fa fa-2x fa-list txt-color-blue"></i></a>').attr('href', 'javascript:void').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'ViewAllRunlist').addClass('instance-bootstrap-list-faimage'));

    $divComponentItem.click(function(e) {
        $(this).parents('.flip-toggle').toggleClass('flip');
    });


    $divComponentList.append($divComponentItem);


    $divComponentListContainer.append($divComponentList);



    $divComponentListImage = $('<a class="btn chefClientRunlistImage"><img src="img/galleryIcons/Chefimport.png" alt="Chefimport"></a>').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'Chef Client Run').addClass('instance-bootstrap-list-image').attr('data-chefServerId', data.chef.serverId).attr('data-instanceId',data._id);

    $divComponentListContainer.append($divComponentListImage);

    //For Table View

    var numberOfRows = $("#tableinstanceview").find('tbody tr').length;

    $rowContainter.append('<td>' + (numberOfRows + 1) + '</td>');
    $rowContainter.append('<td><img src="img/templateicons/Small-Icon/' + data.blueprintData.templateId + '.png" /></td>');


    $rowContainter.append('<td>' + data.blueprintData.blueprintName + '</td>');
    //$rowContainter.append('<td>' +$divComponentList.text()+ '</td>');
    $rowContainter.append('<td class="instanceIPCol">' + data.instanceIP + '</td>');
    var $tableRunlistDiv = $('<div></div>'); /*.append('<span>'+data.runlist.join()+'</span>');*/
   
    var $viewAllA;
    //alert(data.runlist);
    if (data.runlist.length) {
        $viewAllA  = $('<a></a>').attr('href', 'javascript:void(0)').append("View All Runlist");
        $viewAllA.click(function(e) {
            e.preventDefault();
            e.stopPropagation();

            var $modal = $('#modalTableRunlist');
            var $modalBody = $('#modalTableRunlist .modal-body').empty();
            var runlist =  $(this).parents('tr').find('.instance-bootstrap-list-image').data('runlist');
            for (var j = 0; j < runlist.length; j++) {
                var $divComponentItem;
                if (j == 0) {

                    $divComponentItem = $('<span title="' + runlist[j] + '" style="margin-top:8px;overflow:hidden;text-overflow:ellipsis;width:300px;"></span>').addClass('instance-details-item').append(runlist[j]);

                } else {
                    $divComponentItem = $('<span title="' + runlist[j] + '" style="overflow:hidden;text-overflow:ellipsis;width:300px;"></span>').addClass('instance-details-item').append(runlist[j]);
                }

                $modalBody.append($divComponentItem);
            }
            $modal.modal('show');
            return false;
        });
    } else {
       $viewAllA  = $('<span></span>').append("View All Runlist");
    }
    var $divComponentItem = $('<span title="View all runlist" style="overflow:hidden;text-overflow:ellipsis;width:111px;"></span>').addClass('instance-details-item').append($viewAllA);
    $tableRunlistDiv.append($divComponentItem);


    $rowContainter.append($('<td></td>').append($tableRunlistDiv));
    //$rowContainter.append('<td><img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/aws_logo.png" /></td>');
    $rowContainter.append($tableInstanceStatusIndicator);

    $rowContainter.append('<td><a class="tableMoreInfo" data-instanceId="' + data._id + '" href="javascript:void(0)" rel="tooltip" data-placement="top" data-original-title="MoreInfo"><img class="center-block"  src="img/galleryIcons/moreinfo.png" /></a></td>');

    $divDomainRolesCaption.append($divComponentListContainer);
    var $divInstanceDetails = $('<div></div>')
    var $instanceDetailsList = $('<div></div>').addClass('instance-details-list');
    var $instanceDetailItemId = $('<span></span>').addClass('instance-details-id').html('IP : <strong>' + data.instanceIP + '</strong>');
    $instanceDetailsList.append($instanceDetailItemId);
    var $instanceDetailItemStatus;
    if (data.instanceState == 'running') {
        $instanceDetailItemStatus = $('<span></span>').addClass('instance-details-id').html('status : <span class="instance-state instance-state-text-started">' + data.instanceState + '</strong>');
    } else if (data.instanceState == 'terminated') {
        $instanceDetailItemStatus = $('<span></span>').addClass('instance-details-id').html('status : <span class="instance-state instance-state-text-stopped">' + data.instanceState + '</strong>');
    } else if (data.instanceState == 'stopped') {
        $instanceDetailItemStatus = $('<span></span>').addClass('instance-details-id').html('status : <span class="instance-state instance-state-text-stopped">' + data.instanceState + '</strong>');
    } else {
        $instanceDetailItemStatus = $('<span></span>').addClass('instance-details-id').html('status : <span class="instance-state instance-state-text-pending">' + data.instanceState + '</strong>');
    }

    $instanceDetailsList.append($instanceDetailItemStatus);

    $divInstanceDetails.append($instanceDetailsList);

    $divDomainRolesCaption.append($divInstanceDetails);

    $divDomainRolesCaption.append($('<hr>'));


    //data-original-title="Moreinfo" data-placement="top" rel="tooltip"
    var $divActionBtnContainer = $('<div style="width:140px !important;"></div>').addClass('instanceActionBtnCtr').attr('data-instanceId', data._id);

    var $divActionStartContainer = $('<div></div>').addClass('instance-bootstrap-ActionStart').append($('<a href="javascript:void(0)"></a>').addClass('actionbuttonStart instanceActionBtn').attr('data-actionType', 'Start').attr('data-placement', 'top').attr('rel', 'tooltip').attr('data-original-title', 'Start'));
    $divActionBtnContainer.append($divActionStartContainer);
    if (!data.chef) {
        data.chef = {};
    }
    var $divActionReStartContainer = $('<div></div>').addClass('instance-bootstrap-ActionRestart').append($('<a href="javascript:void(0)"></a>').addClass('actionbuttonRestart instanceActionBtnUpdateRunlist').attr('data-chefServerId', data.chef.serverId).attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'Restart'));
    $divActionBtnContainer.append($divActionReStartContainer);
    var $divActionShutdownContainer = $('<div></div>').addClass('instance-bootstrap-ActionShutdown').append($('<a href="javascript:void(0)"></a>').addClass('actionbuttonShutdown instanceActionBtn').attr('data-actionType', 'stop').attr('rel', 'tooltip').attr('data-placement', 'top').attr('data-original-title', 'Shutdown'));
    $divActionBtnContainer.append($divActionShutdownContainer);
    var $back = $('<div></div>').addClass('back card-backflip');
    var $backRunlistContainer = $('<div></div>').addClass('cardBackRunlistContaner');

    var $backdiv = $('<span></span>').addClass('card-backflip-margin');
    var $backdiva = $('<a style="color:#333;"></a>');
    var $backdivai = $('<i></i>').addClass('fa fa-lg fa-fw fa-book txt-color-blue');
    var $backdivaspan = $('<span style="font-size:12px;font-family:Open sans;padding-left:5px;color:#333"></span>').addClass('menu-item-parent').html('Cookbooks');
    var $backhr = $('<hr>');


    $backdivai.append($backdivaspan);
    $backdiva.append($backdivai);
    //$backdiva.append($backhr);
    $backdiv.append($backdiva);

    $back.append($backdiv);
    //rrr alert(data.runlist);
  
    for (var j = 0; j < data.runlist.length; j++) {
        var $divComponentItem;
        

            $divComponentItem = $('<span title="' + data.runlist[j] + '" style="margin-top:8px;overflow:hidden;text-overflow:ellipsis;width:130px;color:#3a87ad"></span>').addClass('instance-details-item').append(data.runlist[j]);

        $backRunlistContainer.append($divComponentItem);
    }
   
    //console.log($backRunlistContainer);
    $back.append($backRunlistContainer);
    $backdiv.append($backhr);

    
    var $flipbackdivaspanhr = $('<hr>');
    $back.append($flipbackdivaspanhr);
    var $flipbackdivaspan = $('<span style="width:160px;text-align:center;display:block;margin-top:8px"></span>').append($('<a style="color:#333"></a>').attr('href', 'javascript:void(0)').append("Go Back"));
    $flipbackdivaspan.click(function(e) {
        $(this).parents('.flip-toggle').toggleClass('flip');
    });
    $back.append($flipbackdivaspan);

    $divDomainRolesCaption.append($divActionBtnContainer);
    $front.append($div);
    $card.append($front);
    $card.append($back);
    $container.append($card);
    $li.append($container);
    //$li.append($div);
    $div.append($divDomainRolesCaption);

    $instancesList.append($li);
    //alert($instancesList.length);
    // alert($("#divinstancescardview li").length);
    // if($("#divinstancescardview li").length > 10){
    //     $('#myCarousel-2 .item active').append($instancesList);
    // }
    //For Table View
    $divComponentListImage
    $rowContainter.append('<td>' + $('<div></div>').append($divComponentListImage.clone()).html() + '</td>');
    $rowContainter.append('<td>' + $('<div></div>').append($divActionBtnContainer.clone()).html() + '</td>');
    $("#tableinstanceview").append($rowContainter);




    if (data.instanceState === 'pending' || data.instanceState === 'stopping') {
      //  pollInstanceState(data._id, data.instanceState, 2000);
      // To be removed from comment later - Vinod
    }



    //handling events

    $rowContainter.find('.instanceActionBtn').click(startStopInstanceHandler);
    $li.find('.instanceActionBtn').click(startStopInstanceHandler);


    $rowContainter.find('.instance-bootstrap-list-image').click(instanceUpdateRunlistHandler).data('runlist',data.runlist);
    $li.find('.instance-bootstrap-list-image').click(instanceUpdateRunlistHandler).data('runlist',data.runlist);


    $rowContainter.find('.tableMoreInfo').click(instanceLogsHandler);
    $li.find('.moreInfo').click(instanceLogsHandler);

    var $cardContainer = $li.find('.container').click(function(e) {
        $('.container').removeClass('role-Selectedcard');
        $(this).addClass('role-Selectedcard');

    });
    pageSetUp();


}



$.get('../organizations/'+orgId+'/projects/' + projectId + '/environments/' + envId + '/instances', function(data) {
    
    //var $instancesList = $('.instancesList').empty();
    var $deploymentNodeList = $('.deploymentNodeList').empty();

    //alert(data.length);

    for (var i = 0; i < data.length; i++) {

        addInstanceToDOM(data[i]);

    }
    //for table view
    if (!$.fn.dataTable.isDataTable('#tableinstanceview')) {
        var tableinstanceview = $('#tableinstanceview').dataTable({
            "pagingType": "full_numbers",
            "aoColumns": [null,
                {
                    "bSortable": false
                },
                null,
                null,
                {
                    "bSortable": false
                },
                {
                    "bSortable": false
                },
                {
                    "bSortable": false
                },
                {
                    "bSortable": false
                },
                {
                    "bSortable": false
                }
            ]
        });
    }
    $('#tableinstanceview tbody tr').eq(0).addClass("rowcustomselected");
    $('#tableinstanceview tbody').on('click','tr',function(){
        if($(this).hasClass('rowcustomselected')){
            $(this).removeClass('rowcustomselected');
        }
        else{
            tableinstanceview.$('tr').removeClass('rowcustomselected');
            $(this).addClass('rowcustomselected');
        }

    });

    console.log('loading table');
    $('#tableinstanceview' + '_info').detach().appendTo('#tableFooterLeft');
    $('#tableinstanceview' + '_paginate').detach().appendTo('#tableFooterRight');
    $('input[type="search"]').css('margin-left','5px'); //providing a space between search and input box
    //$('#tableinstanceview' + '_filter').detach().appendTo('#envtable_tools1');
    // $('#tableinstanceview' + '_length').detach().appendTo('#envtable_tools2');

    //handling instance action btn
    //default selecting first card in Instance and Blueprints

    var $divinstancescardview =$('#divinstancescardview');
    if($divinstancescardview.find('li').length > 0) {
            $divinstancescardview.find('li').first().find('.flip-toggle').trigger('click');   
    }
    $divinstancescardview.find('.item').first().addClass('active');


 

    $(".appFactoryPanel").find(".productdiv1").first().trigger('click');

});



$('#bootstrap-wizard-1').bootstrapWizard({
    'tabClass': 'form-wizard',
    'onNext': function(tab, navigation, index) {
        console.log(typeof index, index)
        if (index === 1) {
            console.log('in here')
            var $selectedItem = $('.role-Selected');
            if (!$selectedItem.length) {
                alert('please choose a role')
                return false;
            }
            var $clone = $selectedItem.clone().removeClass('role-Selected');
            $('#tab' + (index + 1)).find('.temp').empty().append($clone);
        } else {

        }
        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index - 1).addClass(
            'complete');
        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index - 1).find('.step')
            .html('<i class="fa fa-check"></i>');
        //$('#tab'+(index)).removeClass('active');
        //$('#tab'+(index+1)).addClass('active');
        //return true;


    },
    'onPrevious': function(tab, navigation, index) {
        //console.log(index);
        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index + 1).removeClass(
            'complete');
        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index + 1).find('.step')
            .html(index + 2);

    }
});
$('.launchBtn').click(function(e) {
    var $selectedItems = $('.role-Selected1');
    if(!$selectedItems.length) {
      return;
    }
    if($selectedItems.attr('data-templateType') === 'desktopProvisioning') {
        var $modalDesktopProvisioning =$('#modalDesktopProvisioningLaunch');
        var blueprintId = $selectedItems.attr('data-blueprintId');
        var version = $selectedItems.find('.blueprintVersionDropDown').val();
        $modalDesktopProvisioning.data('blueprintId',blueprintId);
        $modalDesktopProvisioning.data('blueprintVersion',version);
        $modalDesktopProvisioning.modal('show');
       return;
    }
    if($selectedItems.attr('data-templateType') === 'Docker') {
          var $launchDockerInstanceSelector = $('#launchDockerInstanceSelector');
          var blueprintId = $selectedItems.attr('data-blueprintId');
          var dockerreponame = $selectedItems.attr('dockerreponame');
          $launchDockerInstanceSelector.data('blueprintId',blueprintId);
        //  $launchDockerInstanceSelector.data('blueprintId',blueprintId);

        

        $launchDockerInstanceSelector.find('.modal-body').empty().append('<span><div class=\"modal-body\"><div><div class=\"row\"><div style=\"color:;\" class=\"col-lg-12 col-sm-12\ dockerinstances"></div></div></div></div></div></span>');
          var $newinstancetable = $("<table></table>").append("<thead><tr><td>Instance Name</td><td>IP Address</td><td>Add Docker Engine</td></tr></thead>");
          var $newinstancetbody = $('<tbody></tbody>');
          $newinstancetable.append($newinstancetbody);
          var $instancetable = $('#tableinstanceview').clone();
          $instancetable.find('tbody tr').each(function(){
              var $newinstancetr = $("<tr><tr>");
              $(this).find('td').each(function(k,v){
                  $newinstancetr.append('<td>' + v +  $(this).html() + '</td>');
              });
              $newinstancetbody.append($newinstancetr);
          });

          $instancetable.attr('id','dockerintsancestab');
          $('.dockerinstances').first().append($instancetable);

          $('#dockerintsancestab thead td').each(function(k,v){
              if(k > 3 )
                  $(this).detach();
            });
           $('#dockerintsancestab thead tr').append('<td title="Select to add a docker engine">Add Engine</td>');
            $('#dockerintsancestab tbody tr').each(function(k,v){

              $(this).removeClass('rowcustomselected');
              $(this).click(function(){
                  $('#dockerintsancestab tbody tr').removeClass('rowcustomselected');
                  $(this).addClass('rowcustomselected');
              });
              $(this).find('td').each(function(k1,v1){
                if(k1 > 3 )
                  $(this).detach();
                //inserting a checkbox to select instance
                if(k1 == 0){
                    $(this).prepend('<input type="checkbox" class="instanceselectedfordocker">&nbsp;');
                }
              });
             $(this).append('<td><input type="checkbox"></td>');

            });
            $('.launchdockerinstance').click(function(){
                $launchResultContainer.find('.modal-body').empty().append('<span><div class=\"modal-body\"><div><h3 class=\"alert alert-success\"><b>Congratulations!</b> Blueprint Launched Successfully !!!</h3>Instance Id : 5460690c6e5c99913e37d0e4<br>Instance Logs :- </div><div class=\"logsAreaBootstrap\"><div><div class=\"row\"><div style=\"color:white;\" class=\"col-lg-12 col-sm-12\"><span>Starting instance</span></div></div></div></div></div></span>');
                $('#myModalLabel').first().html('Launching Blueprint');

            });
            $('#dockerInstanceSelectionTitle').empty().append('Select Instances for ' + dockerreponame);
            $launchDockerInstanceSelector.modal('show');
            $('#dockerintsancestab thead').empty().append('<tr><td>Select Instance</td><td>Logo</td><td>Instance Name</td><td>IP Address</td><td>Add Docker Engine</td></tr>');
            $('#dockerintsancestab').dataTable();
            return;
    }


    var $launchResultContainer = $('#launchResultContainer');
    $launchResultContainer.find('.modal-body').empty().append('<img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/loading.gif" />');
    $launchResultContainer.find('.modal-title').html('Launching Blueprint');
    $launchResultContainer.modal('show');
    for (var i = 0; i < $selectedItems.length; i++) {
        var projectId = $($selectedItems.get(i)).attr('data-projectId');
        var envId = $($selectedItems.get(i)).attr('data-envId');
        var blueprintId = $($selectedItems.get(i)).attr('data-blueprintId');
        var version = $($selectedItems.get(i)).find('.blueprintVersionDropDown').val();
       // alert('launching -> ' +'../blueprints/' + blueprintId + '/launch?version=' + version);
        $.get('/blueprints/' + blueprintId + '/launch?version=' + version, function(data) {

            var $msg = $('<div></div>').append('<h3 class=\"alert alert-success\"><b>Congratulations!</b> Blueprint Launched Successfully</h3>').append('Instance Id : ' + data.id).append('<br/>Instance Logs :- ');

            $launchResultContainer.find('.modal-body').empty();
            $launchResultContainer.find('.modal-body').append($msg);

            var instanceId = data.id;
            var timeout;

            $launchResultContainer.on('hidden.bs.modal', function(e) {
                $launchResultContainer.off('hidden.bs.modal');
                if (timeout) {
                    clearTimeout(timeout);
                }
            });
            $divBootstrapLogArea = $('<div></div>').addClass('logsAreaBootstrap');

            $launchResultContainer.find('.modal-body').append($divBootstrapLogArea);

            var lastTimestamp;

            function pollLogs(timestamp, delay, clearData) {
                var url = '../instances/' + instanceId + '/logs';
                if (timestamp) {
                    url = url + '?timestamp=' + timestamp;
                }

                timeout = setTimeout(function() {
                    $.get(url, function(data) {
                        var $modalBody = $divBootstrapLogArea;
                        if (clearData) {
                            $modalBody.empty();
                        }
                        var $table = $('<div></div>');

                        for (var i = 0; i < data.length; i++) {
                            var $rowDiv = $('<div class="row"></div>');
                            var timeString = new Date().setTime(data[i].timestamp);
                            var date = new Date(timeString).toUTCString(); //converts to human readable strings
                            //$rowDiv.append($('<div class="col-lg-4 col-sm-4"></div>').append('<div>' + date + '</div>'));

                            if (data[i].err) {
                                $rowDiv.append($('<div class="col-lg-12 col-sm-12" style="color:red;"></div>').append('<span>' + data[i].log + '</span>'));
                            } else {
                                $rowDiv.append($('<div class="col-lg-12 col-sm-12 " style="color:white;"></div>').append('<span>' + data[i].log + '</span>'));
                            }

                            $table.append($rowDiv);
                        }


                        if (data.length) {
                            lastTimestamp = data[data.length - 1].timestamp;
                            console.log(lastTimestamp);
                            $modalBody.append($table);
                            $modalBody.scrollTop($modalBody[0].scrollHeight + 100);
                        }


                        console.log('polling again');
                        if ($launchResultContainer.data()['bs.modal'].isShown) {
                            pollLogs(lastTimestamp, 1000, false);
                        } else {
                            console.log('not polling again');
                        }
                    });
                }, delay);
            }
            pollLogs(lastTimestamp, 0, true);

            $.get('../instances/' + data.id, function(data) {
                addInstanceToDOM(data);
            });

        }).error(function() {
            $launchResultContainer.find('.modal-body').empty().append('<span>Oops!!! Something went wrong. Please try again later</span>');
        });
    }
});

$('.desktopProvisioningLaunchBtn').click(function(e) {
    var $modalDesktopProvisioning = $('#modalDesktopProvisioningLaunch');
    var blueprintId = $modalDesktopProvisioning.data('blueprintId');
    var version = $modalDesktopProvisioning.data('blueprintVersion');;
    var reqBody = {};
    reqBody.version = version;
    reqBody.username = $('#instanceUsernameInput').val();
    reqBody.password = $('#instancePasswordInput').val();
    reqBody.instanceIP = $('#instanceIPInput').val();

    $modalDesktopProvisioning.modal('hide');
    var $launchResultContainer = $('#launchResultContainer');
    $launchResultContainer.find('.modal-body').empty().append('<img class="center-block" style="height:50px;width:50px;margin-top: 10%;margin-bottom: 10%;" src="img/loading.gif" />');
    $launchResultContainer.find('.modal-title').html('Provisioning Instance');
    $launchResultContainer.modal('show');


    $.post('/blueprints/' + blueprintId + '/provision', reqBody, function(data) {
        var $msg = $('<div></div>').append('<h3 class=\"alert alert-success\"><b>Congratulations!</b> Blueprint Launched Successfully</h3>').append('Instance Id : ' + data.id).append('<br/>Instance Logs :- ');

        $launchResultContainer.find('.modal-body').empty();
        $launchResultContainer.find('.modal-body').append($msg);

        var instanceId = data.id;
        var timeout;

        $launchResultContainer.on('hidden.bs.modal', function(e) {
            $launchResultContainer.off('hidden.bs.modal');
            if (timeout) {
                clearTimeout(timeout);
            }
        });
        $divBootstrapLogArea = $('<div></div>').addClass('logsAreaBootstrap');

        $launchResultContainer.find('.modal-body').append($divBootstrapLogArea);

        var lastTimestamp;

        function pollLogs(timestamp, delay, clearData) {
            var url = '/instances/' + instanceId + '/logs';
            if (timestamp) {
                url = url + '?timestamp=' + timestamp;
            }

            timeout = setTimeout(function() {
                $.get(url, function(data) {
                    var $modalBody = $divBootstrapLogArea;
                    if (clearData) {
                        $modalBody.empty();
                    }
                    var $table = $('<div></div>');

                    for (var i = 0; i < data.length; i++) {
                        var $rowDiv = $('<div class="row"></div>');
                        var timeString = new Date().setTime(data[i].timestamp);
                        var date = new Date(timeString).toUTCString(); //converts to human readable strings
                        //$rowDiv.append($('<div class="col-lg-4 col-sm-4"></div>').append('<div>' + date + '</div>'));

                        if (data[i].err) {
                            $rowDiv.append($('<div class="col-lg-12 col-sm-12" style="color:red;"></div>').append('<span>' + data[i].log + '</span>'));
                        } else {
                            $rowDiv.append($('<div class="col-lg-12 col-sm-12 " style="color:white;"></div>').append('<span>' + data[i].log + '</span>'));
                        }

                        $table.append($rowDiv);
                    }


                    if (data.length) {
                        lastTimestamp = data[data.length - 1].timestamp;
                        console.log(lastTimestamp);
                        $modalBody.append($table);
                        $modalBody.scrollTop($modalBody[0].scrollHeight + 100);
                    }


                    console.log('polling again');
                    if ($launchResultContainer.data()['bs.modal'].isShown) {
                        pollLogs(lastTimestamp, 1000, false);
                    } else {
                        console.log('not polling again');
                    }
                });
            }, delay);
        }
        pollLogs(lastTimestamp, 0, true);
        $.get('/instances/' + data.id, function(data) {
            addInstanceToDOM(data);
        });

    }).error(function() {
        $launchResultContainer.find('.modal-body').empty().append('<span>Oops! Something went wrong. Please try again later</span>');
    });;



});



$('.blueprintUpdateBtn').click(function(e) {

    var $blueprintEditResultContainer = $('#blueprintEditResultContainer');
    var $chefRunlist = $blueprintEditResultContainer.find('.blueprintChefCookbookList');
    var blueprintId = $chefRunlist.attr('data-blueprintId');
    if (blueprintId) {
        console.log($chefRunlist.val());
        var blueprintData = {
            runlist: $chefRunlist.val(),
            expirationDays: 0,
        };

        $.post('../blueprints/' + blueprintId + '/update', {
            blueprintUpdateData: blueprintData
        }, function(data) {
            $('.blueprintVersionDropDown[data-blueprintId="' + blueprintId + '"]').append($('<option value="' + data.version + '">' + data.version + '</option>').attr('selected', true));
            console.log(data);
        });

    }
});

$('.btnUpdateInstanceRunlist').click(function(e) {
    var instanceId = $('#instanceCookbookList').attr('data-instanceId');
    
    var runlist = [];
    var $options = $('#instanceCookbookSelectedList').children();
    $options.each(function(){
       runlist.push($(this).val()); 
    });

    console.log(runlist);
    $.post('../instances/' + instanceId + '/updateRunlist', {
        runlist: runlist
    }, function(data) {
        $chefRunModalContainer = $('#chefRunModalContainer').modal('hide');
        var $parent = $('.domain-roles-caption[data-instanceId="' + instanceId + '"]');
        $parent.find('.moreInfo').trigger('click');
        console.log(data);
    });
});

$('.actionControlPanel').click(function(e) {
    //var getbreadcrumbul = $('#ribbon').find('.breadcrumb').find('li').length;
    var getbreadcrumbul = $('#ribbon').find('.breadcrumb').find('li');
    var getbreadcrumbullength = getbreadcrumbul.length;
    var DummyBreadCrumb;
    if(getbreadcrumbullength > 0)
    {
    //alert(getbreadcrumbullength);
    for(var counter=0;counter<getbreadcrumbullength;counter++){
        //alert('hi');
        var getbreadcrumbulname = getbreadcrumbul[counter].innerHTML;
        if(DummyBreadCrumb != null && DummyBreadCrumb != "" && DummyBreadCrumb !="undefined")
        {
            DummyBreadCrumb += '>' + getbreadcrumbulname;
        }
        else
        {
            DummyBreadCrumb = getbreadcrumbulname;
        }
    }
    localStorage.setItem("breadcrumb", DummyBreadCrumb);
}

    var controlId = $(".visibleClass").attr("id");
    //alert(controlId);
    var urlText;
    localStorage.setItem("dataEx", location.href);
    
   
    if ($('#divinstancescardview').is(':visible')) {

        var $selectedCard = $('.role-Selectedcard');
        if ($selectedCard.length) {
            var instanceId = $selectedCard.find('.domain-roles-caption').attr('data-instanceId');
            if (instanceId) {
                urlText = 'index.html#ajax/Controlpanel.html?org='+urlParams.org+'&id=' + instanceId + '&visibleControlid=' + controlId ;
                window.location.href = urlText;
                // window.location.href = 'index.html#ajax/Controlpanel.html?org='+urlParams.org+'&id=' + instanceId;
            }
        }
    } else {
        var $selectedCard = $('.rowcustomselected');
        if ($selectedCard.length) {
            var instanceId = $selectedCard.attr('data-instanceId');
            if (instanceId) {
                urlText = 'index.html#ajax/Controlpanel.html?org='+urlParams.org+'&id=' + instanceId + '&visibleControlid=' + controlId ;
                //localStorage.setItem("dataEx", urlText);
                window.location.href = urlText;
                // window.location.href = 'index.html#ajax/Controlpanel.html?org='+urlParams.org+'&id=' + instanceId;
            }
        }
    }
}); 

function showHideControl(objID)
{
    if(objID)
    {
        if(objID == "divinstancescardview" || objID == "defaultViewButton")
        {
            $("#divinstancestableview").removeClass("visibleClass");
            $("#divinstancescardview").addClass("visibleClass");
            $("#divinstancestableview").hide();
            $("#divinstancescardview").show();
        }
        else
        {   

            $("#divinstancestableview").addClass("visibleClass");
            $("#divinstancescardview").removeClass("visibleClass");
            $("#divinstancestableview").show();
            $("#divinstancescardview").hide();
        }
        //localStorage.clear();
    }
}
window.onload= getViewTile();

function getViewTile(){
    var locationData = localStorage.getItem("ControlID");
    if(locationData)
    {
        showHideControl(locationData);
        localStorage.clear();
    }
}


  $('.carousel.slide').carousel({
    interval : false,
    cycle : true
  });
</script>
