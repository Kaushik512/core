<style>
	.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
		border-top: 0px !important;
	}

	tr.show-settings:hover .settings{
		display:block;
	}

	div.settings{
		display:none;
		width: 32px;
		height: 18px;
	}
	.dropdown-content{
		border-radius: 5px;
	    left: -30px;
	    min-width: 98px;
	    right: 0;
	}
	.show-settings input{
		border: 1px solid #999;
	}
	.show-settings input, span{
		height: 20px;
	}

</style>

<div class="clearfix"></div>
<ul class="nav nav-tabs " role="tablist">
	<li class="active"><a href="#organiz" role="tab" data-toggle="tab">Organization</a></li>
</ul>

<!-- Tab panes -->
<div  class="tab-content">
	<div  class="tab-pane active tabContent" id="organiz">
		<table class="table table-hover">
		
		<thead>
			<tr>
				<th>Node Name</th>
				<th>IP Address</th>
				<th>FQDN</th>
				<th>Platform</th>
				<th>Uptime</th>
				<th>Last Check In</th>
				<th>Environment</th>
				<th>Actions</th>

			</tr>
		</thead>
		<tbody>
	

		</tbody>
	</table>
</div>

</div>	
<script type="text/javascript">
  $.get('/chef/nodes',function(data){
    var $tableBody = $('.table-hover tbody');
  	var environments = Object.keys(data);
  	for(var i=0;i<environments.length;i++) {
        var nodes = data[environments[i]].nodes;
  		for(var j=0;j<nodes.length;j++) {
  			var node = nodes[j];
  			var $tr = $('<tr></tr>').addClass('show-settings');
            $tr.append($('<td></td>').append('<span>'+node.name+'</span>'));
            var ip = 'unknown';
            if(node.automatic.ipaddress) {
                ip = node.automatic.ipaddress;
            }
            $tr.append($('<td></td>').append('<span>'+ip+'</span>'));

            var fqdn = 'unknown';
            if(node.automatic.fqdn) {
                fqdn = node.automatic.fqdn;
            }
            $tr.append($('<td></td>').append('<span>'+fqdn+'</span>'));

            var platform = 'unknown';
            if(node.automatic.platform) {
                platform = node.automatic.platform;
            }
            $tr.append($('<td></td>').append('<span>'+platform+'</span>'));

            var uptime = 'unknown';
            if(node.automatic.uptime) {
                uptime = node.automatic.uptime;
            }
            $tr.append($('<td></td>').append('<span>'+uptime+'</span>'));

            var lastCheckIn = 'unknown';
            if(node.automatic.lastCheckIn) {
                lastCheckIn = node.automatic.lastCheckIn;
            }
            $tr.append($('<td></td>').append('<span>'+lastCheckIn+'</span>'));
            
            $tr.append($('<td></td>').append('<span>'+environments[i]+'</span>'));
            $tr.append($('<td><div class="dropdown settings" ><button class="btn btn-xs dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"><i class="fa fa-cog txt-color-blueDark"></i><span class="caret"></span></button><ul class="dropdown-menu dropdown-content"  role="menu" aria-labelledby="dropdownMenu1"><li role="presentation"><a role="menuitem" tabindex="-1" href="#">Bootstrap</a></li><li role="presentation"><a role="menuitem" tabindex="-1" href="#">Delete</a></li><li role="presentation"><a role="menuitem" tabindex="-1" href="#">Edit</a></li><li role="presentation"><a role="menuitem" tabindex="-1" href="#">Manage</a></li><li role="presentation"><a role="menuitem" tabindex="-1" href="#">No Action</a></li></ul></div></td>')); 

            $tableBody.append($tr);
             console.log('added');

  		}
  	}

  });

</script>
<script>
var b = $('#tabContent tr td').width();
var c = $('#tabContent tr ').width(); 
 b=c;
$('.tabContent tr').find('span').on('click', function(){
	var w = $(this).width();
	var h = $(this).height();
	var a = $(this).html();
	$(this).hide();
	$(this).parent().children('input').show().focus().val(a);
	$(this).parent().children('input').css({"width": w+'px'});
});

$('.tabContent tr').find('input').on('blur', function(){
	var inputVal = $(this).val();
	$(this).hide();
	$(this).parent().children('span').show().html(inputVal);
});
</script>